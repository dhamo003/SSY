<section id="widget-grid" class="">


    <div class="row">
        <article class="col-sm-12 col-md-12 col-lg-12 nocollapse">
            <div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-1" data-widget-editbutton="false" data-widget-sortable="false">

                <header>

                    <h2>Claim View</h2>


                </header>


                <div>


                    <div class="jarviswidget-editbox">

                    </div>

                    <div class="widget-body no-padding">


                        <form class="smart-form smart-form-main">
                            <div *ngIf="isVisibleClaimExceptions">
                                <header>Exceptions</header>
                                <fieldset>
                                    <section>
                                        <div [innerHTML]="claimExceptionDetails"></div>
                                    </section>
                                </fieldset>
                            </div>
                            <header>Beneficiary Details</header>
                            <fieldset>
                                <section>
                                    <div class="row">
                                        <div class="col col-6">
                                            <label><strong>Name: </strong>{{beneficiary?.benFullName}}</label>
                                        </div>
                                        <div class="col col-6">
                                            <label><strong>SSIN: </strong>{{beneficiary?.ssI_Number}}</label>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col col-6">
                                            <label><strong>Bank Name: </strong>{{beneficiary?.benBankName}}</label>
                                        </div>
                                        <div class="col col-6">
                                            <label><strong>Account No: </strong>{{beneficiary?.benBankAccNo}}</label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col col-6">
                                            <label><strong>IFSC Code: </strong>{{beneficiary?.benBankIfscCode}}</label>
                                        </div>
                                        <div class="col col-6">
                                            <label><strong>Branch: </strong>{{beneficiary?.benBankBranch}}</label>
                                        </div>
                                    </div>
                                </section>

                            </fieldset>
                            <fieldset disabled="true">
                                <div class="row" id="CheckBoxList">
                                    <div class="col col-3">
                                        <label class="checkbox state-success"><input type="checkbox" name="checkbox" value="PF" [checked]="claim.providentFundDetails != null"><i></i>PF(Provident Fund)</label>
                                    </div>
                                    <div class="col col-3">
                                        <label class="checkbox state-success"><input type="checkbox" name="checkbox" value="Health & Family" [checked]="claim.healthFamilyDetails != null"><i></i>Health & Family</label>
                                    </div>
                                    <div class="col col-3">
                                        <label class="checkbox state-success"><input type="checkbox" name="checkbox" value="Death" [checked]="claim.deathDetails != null"><i></i>Death</label>
                                    </div>
                                    <div class="col col-3">
                                        <label class="checkbox state-success"><input type="checkbox" name="checkbox" value="Disability" [checked]="claim.disabilityDetails != null"><i></i>Disability</label>
                                    </div>
                                    <div class="col col-3">
                                        <label class="checkbox state-success"><input type="checkbox" name="checkbox" value="Education" [checked]="claim.educationDetails != null"><i></i>Education</label>
                                    </div>
                                </div>
                            </fieldset>
                            <div *ngIf="claim.providentFundDetails != null">
                                <header>Provident Fund</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6 ">
                                                <label>
                                                    <strong> PF No.: </strong>{{claim.providentFundDetails.pfno}}
                                                </label>
                                            </div>
                                            <div class="col col-6 ">
                                                <label>
                                                    <strong> Claim Amount:</strong> {{claim.providentFundDetails.claimAmount}} /-
                                                </label>
                                            </div>
                                        </div>
                                    </section>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6 ">
                                                <label>
                                                    <strong>  Date of Maturity:</strong> {{claim.providentFundDetails.maturityDateString}}
                                                </label>
                                            </div>
                                            <div class="col col-6 ">
                                                <label>
                                                    <strong>  Locking Period Up-to:</strong>  {{claim.providentFundDetails.lockingPeriodDateString}}
                                                </label>
                                            </div>
                                        </div>
                                    </section>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6 ">
                                                <label>
                                                    <strong> Type of Claim:</strong> {{claim.providentFundDetails.typeOfClaimName}}
                                                </label>

                                            </div>
                                            <div class="col col-6 " *ngIf="isPrematureClaim">
                                                <label>
                                                    <strong> Reason for Preclosure:</strong> {{claim.providentFundDetails.reasonForPreClosure}}
                                                </label>

                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                            </div>
                            <div *ngIf="claim.educationDetails != null">
                                <header>Education</header>

                                <fieldset>

                                    <section>
                                        <div class="row">
                                            <div class="col col-6">

                                                <div><strong>Claim Amount : </strong> {{claim?.educationDetails?.claimAmount}}</div>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                                <header>Dependent Details</header>
                                <fieldset>
                                    <section *ngFor="let detail of educationList">

                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Name of the Student: </strong>{{detail?.dependentName}} </label>
                                            </div>
                                            <div class="col col-6">
                                                <label> <strong>Name of the Institution: </strong> {{detail?.institutionName}}</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Name of the Principal/Head Master of the institution:</strong>{{detail?.institutionPrinicipleName}} </label>
                                            </div>
                                            <div class="col col-6">
                                                <label> <strong> Contact Number of the Institution: </strong>{{detail?.institutionContact}}</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Registration No./Roll No. of last exam passed: </strong>{{detail?.registrationRollNo}}</label>
                                            </div>
                                            <div class="col col-6">
                                                <label><strong> Year of Examination: </strong>{{detail?.year}}</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Date of Admission: </strong>{{detail?.dateofAdmissionString}}</label>
                                            </div>
                                            <div class="col col-6">
                                                <label><strong> Last Exam Passed: </strong>{{detail?.lastExamPassedName}}</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Presently Reading: </strong>{{detail?.presentlyReadingName}}</label>
                                            </div>
                                            <div class="col col-6">
                                                <label><strong>Eligible Amount :</strong>{{detail?.eligibleAmount}}</label>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                                <header>Educational Attachments</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">
                                                <a (click)="viewAttachment()" class="smart-form-link">View All Attachments</a>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                            </div>
                            <div *ngIf="this.claim.healthFamilyDetails != null">
                                <header>Health & Family</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">

                                                <div><strong>Claim Amount : </strong> {{claim?.healthFamilyDetails?.claimAmount}}</div>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                                <header>Health & Family Details</header>
                                <fieldset>
                                    <section>

                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Type of Claim: </strong>{{claim?.healthFamilyDetails?.typeOfClaimName}} </label>
                                            </div>
                                            <div class="col col-6">
                                                <label>
                                                    <strong>Hospital : </strong> {{claim?.healthFamilyDetails?.hospitalName}}
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label>
                                                    <strong> Hospitalization/OPD:</strong>{{claim?.healthFamilyDetails?.typeOfHospitalizationName}}
                                                </label>
                                            </div>
                                            <div class="col col-6">
                                                <label>
                                                    <strong> Patient Id: </strong>{{claim?.healthFamilyDetails?.patientId}}
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="claim?.healthFamilyDetails?.typeOfHospitalization==2">
                                            <div class="col col-6">
                                                <label><strong> Name of Disease: </strong>{{claim?.healthFamilyDetails?.nameOfTheDiseaseString}}</label>
                                            </div>
                                            <div class="col col-6" *ngIf="claim?.healthFamilyDetails?.nameOfTheDisease==1">
                                                <label><strong> Name of clinical test: </strong>{{claim?.healthFamilyDetails?.nameOfClinicalTestString}}</label>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="viewMetWithAnAccident">
                                            <div class="col col-6">
                                                <label>
                                                    <strong> Met with an Accident:</strong>{{claim?.healthFamilyDetails?.isAccident}}
                                                </label>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Cost of Clinical Test: </strong>{{claim?.healthFamilyDetails?.costOfClinicalTest}}</label>
                                            </div>
                                            <div class="col col-6">
                                                <label><strong> Cost of Medicine: </strong>{{claim?.healthFamilyDetails?.costOfMedicine}}</label>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="claim?.healthFamilyDetails?.typeOfHospitalization==2">
                                            <div class="col col-6">
                                                <label><strong> Date of First Appointment: </strong>{{claim?.healthFamilyDetails?.firstAppointmentDateString}}</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong>Claim for: </strong>{{claim?.healthFamilyDetails?.claimForName}}</label>
                                            </div>
                                            <div class="col col-6" *ngIf="claim?.healthFamilyDetails?.typeOfHospitalization==1">
                                                <label><strong> Cost of Hospitalization: </strong>{{claim?.healthFamilyDetails?.costOfHospitalization}}</label>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="claim?.healthFamilyDetails?.typeOfHospitalization==1">
                                            <div class="col col-6">
                                                <label><strong> Date of Admission to Hospital: </strong>{{claim?.healthFamilyDetails?.admittedDateString}}</label>
                                            </div>
                                            <div class="col col-6">
                                                <label><strong>Date of Discharge :</strong>{{claim?.healthFamilyDetails?.dischargeDateString}}</label>
                                            </div>
                                        </div>
                                        <div class="row" *ngIf="claim?.healthFamilyDetails?.familyMemberId != undefined && claim?.healthFamilyDetails?.familyMemberId !=0">
                                            <div class="col col-6">
                                                <label><strong> Family Member Name: </strong>{{claim?.healthFamilyDetails?.familyMemberName}}</label>
                                            </div>

                                        </div>
                                    </section>
                                </fieldset>
                                <div *ngIf="claim?.healthFamilyDetails?.typeOfHospitalizationName!='OPD'">
                                    <header>Loss of Employment</header>
                                    <fieldset>
                                        <section>
                                            <div class="row">
                                                <div class="col col-6">
                                                    <label><strong> From Date: </strong>{{claim?.healthFamilyDetails?.loeFromDateString}}</label>
                                                </div>
                                                <div class="col col-6">
                                                    <label><strong>To Date :</strong>{{claim?.healthFamilyDetails?.loeToDateString}}</label>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col col-6">
                                                    <label><strong> Amount: </strong>{{claim?.healthFamilyDetails?.loeAmount}}</label>
                                                </div>
                                            </div>
                                        </section>
                                    </fieldset>
                                </div>
                                <header>Health & Family Attachments</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">
                                                <a (click)="viewAttachment()" class="smart-form-link">View All Attachments</a>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                                <header>View Packages</header>
                                <fieldset>
                                    <section>
                                        <div class="row" *ngIf="selectedPackages.length>0">
                                            <table class="table table-striped" [mfData]="selectedPackages" #mf="mfDataTable" [mfRowsOnPage]="10">
                                                <thead>
                                                    <tr>
                                                        <th><mfDefaultSorter by="packageName">Package Name</mfDefaultSorter></th>
                                                        <th><mfDefaultSorter by="packageCode">Package Code</mfDefaultSorter></th>
                                                        <th><mfDefaultSorter by="ailmentName">Ailment Name</mfDefaultSorter></th>
                                                        <th><mfDefaultSorter by="amount">Amount</mfDefaultSorter></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let pak of mf.data;">
                                                        <td>{{pak.packageName}}</td>
                                                        <td>{{pak.packageCode}}</td>
                                                        <td>{{pak.ailmentName}}</td>
                                                        <td>{{pak.amount}}</td>
                                                    </tr>
                                                </tbody>
                                                <tfoot><tr><td colspan="4"><mfBootstrapPaginator></mfBootstrapPaginator></td></tr></tfoot>
                                            </table>
                                        </div>
                                    </section>
                                </fieldset>
                            </div>
                            <div *ngIf="this.claim.disabilityDetails != null">
                                <header>Disability</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">

                                                <div><strong>Claim Amount : </strong> {{claim?.disabilityDetails?.claimAmount}}</div>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                                <header>Disability Details</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Date of release from hospital/Accident: </strong>{{claim?.disabilityDetails?.dateofReleaseString}} </label>
                                            </div>
                                            <div class="col col-6">
                                                <label>
                                                    <strong>Nature of Disability : </strong> {{claim?.disabilityDetails?.natureOfDisabilityName}}
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Details of Disability: </strong>{{claim?.disabilityDetails?.detailsOfDisability}} </label>
                                            </div>

                                        </div>
                                    </section>

                                </fieldset>
                                <header>Disability Attachments</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">
                                                <a (click)="viewAttachment()" class="smart-form-link">View All Attachments</a>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                            </div>
                            <div *ngIf="this.claim.deathDetails != null">
                                <header>Death</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">

                                                <div><strong>Claim Amount : </strong> {{claim?.deathDetails?.claimAmount}}</div>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                                <header>Death Details</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label>
                                                    <strong>Nature of Death : </strong> {{claim?.deathDetails?.natureofDeathName}}
                                                </label>
                                            </div>
                                            <div class="col col-6">
                                                <label><strong>Date of Death: </strong>{{claim?.deathDetails?.dateofDeathString}} </label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col col-6">
                                                <label><strong> Details of Death: </strong>{{claim?.deathDetails?.detailsofDeath}} </label>
                                            </div>
                                            <div class="col col-6">
                                                <label><strong> Place of Death: </strong>{{claim?.deathDetails?.placeofDeath}} </label>
                                            </div>
                                        </div>
                                    </section>

                                </fieldset>
                                <header>Death Attachments</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">
                                                <a (click)="viewAttachment()" class="smart-form-link">View All Attachments</a>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                            </div>
                            <header>Time Line</header>
                            <fieldset>
                                <section>
                                    <!-- row -->
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="width:98%">
                                            <div class="well well-sm">
                                                <div class="smart-timeline">
                                                    <ul class="smart-timeline-list">

                                                        <li *ngFor="let item of claimsTrack">
                                                            <div class="smart-timeline-icon">
                                                                <i class="fa fa-user"></i>
                                                            </div>
                                                            <div class="smart-timeline-time">
                                                                <small>{{formatDate(item.actionDate)}}</small>
                                                            </div>
                                                            <div class="smart-timeline-content">
                                                                <p>
                                                                    <a href="javascript:void(0);"><strong>{{item.userName}} - {{item.action}}</strong></a>
                                                                </p>
                                                                <p>
                                                                    {{item.actionComments}}
                                                                </p>
                                                            </div>
                                                        </li>

                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </fieldset>
                            <div *ngIf="isShowClaimsHistory">
                                <header>Claims History</header>
                                <fieldset>
                                    <section>
                                        <div class="row">
                                            <div class="col col-6">
                                                <a (click)="viewHistory()" class="smart-form-link">View Claims History</a>
                                            </div>
                                        </div>
                                    </section>
                                </fieldset>
                            </div>
                            <fieldset>
                                <section>
                                    <label>Approved Amount<span [style.color]="!approvedAmountValid?'red':''"><b>*</b></span></label>
                                    <label class="input">
                                        <input type="text" name="approvedAmount" [disabled]="!isApprovedAmountDisable" [(ngModel)]="review.approvedAmount" placeholder="Approved Amount" NumbersOnly>
                                    </label>
                                </section>
                            </fieldset>
                            <fieldset>
                                <section>
                                    <label>ALC Comments<span [style.color]="!alcCommentsValid?'red':''"><b>*</b></span></label>
                                    <label class="textarea textarea-resizable">
                                        <textarea rows="3" class="custom-scroll" [disabled]="!isVisable" name="alcComments" [(ngModel)]="review.alcComments"
                                                  #alcComments="ngModel"
                                                  [ngClass]="{'invalid-data': alcComments.invalid && (!alcCommentsValid || alcComments.touched), 'valid-data': alcComments.valid && alcCommentsValid}"
                                                  required></textarea>
                                    </label>
                                    <div *ngIf="alcComments.invalid && (!alcCommentsValid ||alcComments.touched)">
                                        <span style="color: red;">ALC Comments is required </span>
                                    </div>
                                </section>

                            </fieldset>

                            <fieldset>
                                <section>
                                    <label>Exception Comments</label>
                                    <label class="textarea textarea-resizable">
                                        <textarea rows="3" class="custom-scroll" [disabled]="!isVisable" name="exceptionComments" [(ngModel)]="review.exceptionComments"></textarea>
                                    </label>
                                </section>

                            </fieldset>

                            <footer class="modal-footer">
                                <a class="btn btn-warning" *ngIf="isVisable"> Reject</a>
                                <a class="btn btn-success" *ngIf="isVisable">Approve</a>
                                <a class="btn btn-primary"  *ngIf="isVisable"> Send Back</a>
                                <a class="btn btn-danger" (click)="cancelclick()"> Cancel</a>
                            </footer>
                        </form>

                    </div>

                </div>

            </div>

        </article>

    </div>

</section>
<div bsModal #successModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true" backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">

                <h4 class="modal-title">Success Message</h4>
            </div>
            <div class="modal-body">
                <p id="mesgSubmit">{{successMessage}}</p>
            </div>
            <div class="modal-footer">
                <!--<button type="button" class="btn btn-default" (click)="downloadRecipt()">
                    Download Receipt
                </button>-->
                <button type="button" class="btn btn-primary" (click)="okClick()">
                    Ok
                </button>
            </div>
        </div>
    </div>
</div>

<div bsModal #attachModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true" backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" (click)="attachModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Attachment Details</h4>
            </div>
            <div class="modal-body" style="max-height:500px">
                <div class="row" style="display:inline-flex;width:100%">
                    <div style="width:50%;padding:5px;overflow:scroll;max-height:470px">
                        <app-claimviewdata [claimId]="claimId" [claimType]="claimType" [transactionId]="tranctionId"></app-claimviewdata>
                    </div>
                    <div style="width:50%;padding:5px;overflow:scroll;max-height:470px;min-height:inherit">
                        <accordion>
                            <accordion-group heading="{{item.attachmentTypeString}}" *ngFor="let item of attachmentList">
                                <div *ngIf="item.fileName.split('.')[item.fileName.split('.').length-1]!='pdf'">
                                    <img [src]="'data:image/'+item.fileName.split('.')[item.fileName.split('.').length-1]+';base64,'+ item.fileContent" style="max-width:100%" />
                                </div>
                                <div *ngIf="item.fileName.split('.')[item.fileName.split('.').length-1]=='pdf'">
                                    <object [attr.data]="item.attachmenturl" style="width:100%;height:400px" type="application/pdf"></object>
                                </div>
                            </accordion-group>
                        </accordion>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" (click)="attachModal.hide()">
                        Ok
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div bsModal #historyModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true" backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" (click)="historyModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Claims History</h4>
            </div>
            <div class="modal-body">
                <div>
                    <table class="table table-striped" [mfData]="claimsHistoryData" #mf="mfDataTable" [mfRowsOnPage]="10">
                        <thead>
                            <tr>
                                <th>
                                    Claim Reference No.
                                </th>
                                <th>
                                    Submission Date
                                </th>
                                <th>
                                    Amount
                                </th>
                                <th>
                                    Approved Amount
                                </th>
                                <th>
                                    Status
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let user of mf.data; let i=index;">
                                <td>{{user.claimRefernceNo}}</td>
                                <td>{{user.submittedDateString}}</td>
                                <td>{{user.claimAmount}}</td>
                                <td>{{user.approvedAmount}}</td>
                                <td>{{user.statusName}}</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="5"></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" (click)="historyModal.hide()">
                    Ok
                </button>
            </div>
        </div>
    </div>
</div>