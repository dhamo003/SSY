<section id="widget-grid" class="">
    <div class="row">
        <article class="col-sm-12 col-md-12 col-lg-12 nocollapse">
            <div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-1" data-widget-editbutton="false" data-widget-sortable="false">
                <header>
                    <h2>Receipt Book</h2>
                </header>
                <!-- widget div-->
                <div>
                    <!-- widget edit box -->
                    <div class="jarviswidget-editbox">
                        <!-- This area used as dropdown edit box -->
                    </div>
                    <!-- end widget edit box -->
                    <!-- widget content -->
                    <div class="widget-body no-padding">
                        <!-- Success states for elements -->
                        <form class="smart-form">
                            <header>Issue Receipt Book</header>
                            <fieldset id="contribution">
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="label">Issued Date <span [style.color]="!dateValid?'red':''"><b>*</b></span></label>
                                        <label class="input">
                                            <i class="icon-append fa fa-calendar"></i>
                                            <input type="text" name="date" class="form-control" bsDatepicker [bsConfig]="datePickerConfig"
                                                   placeholder="DD/MM/YYYY" value="{{ receiptBook.date | date: 'dd/MM/yyyy' }}" [(ngModel)]="receiptBook.date"
                                                   [maxDate]="maxDate" (bsValueChange)="issueDateChange($event)"
                                                   #date="ngModel" required
                                                   [ngClass]="{'invalid-data':date.invalid && (!dateValid), 'valid-data': date.valid && dateValid}" />
                                            <i></i>
                                        </label>
                                        <div *ngIf="date.invalid && (!dateValid)">
                                            <span style="color: red;">Issued Date is required </span>
                                        </div>
                                        <div *ngIf="todayMinIssueDateReq">
                                            <span style="color: red;">Issued Date should be less than or equal to Today Date </span>
                                        </div>
                                    </section>
                                    <section class="col col-6">
                                        <label class="label">Agent Code <span [style.color]="!agentCodeValid?'red':''"><b>*</b></span></label>
                                        <label class="input">
                                            <select class="form-control select" name="agentName" id="ddlAgentName" [(ngModel)]="receiptBook.agentCode"
                                                    (change)="agentChange($event.target.value)">
                                                <option value="{{agent.userid}}" *ngFor="let agent of agentList">{{agent.userCode}}</option>
                                            </select>
                                            <!--<input type="text" name="agentCode" placeholder="Agent Code" [(ngModel)]="receiptBook.agentCode">-->
                                        </label>
                                        <div *ngIf="!agentCodeValid">
                                            <span style="color: red;">Agent Code is required </span>
                                        </div>
                                    </section>
                                </div>
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="label">Receipt Book No <span [style.color]="!bookNoValid?'red':''"><b>*</b></span></label>
                                        <label class="input">
                                            <input type="text" name="bookNo" placeholder="Book No" [(ngModel)]="receiptBook.bookNo" 
                                                   (change)="validateReceiptBookName()">
                                        </label>
                                        <div *ngIf="!bookNoValid">
                                            <span style="color: red;">Receipt Book No is required </span>
                                        </div>
                                        <div *ngIf="bookNameValid">
                                            <span style="color: red;">Receipt Book No is already generated </span>
                                        </div>
                                    </section>
                                    <section class="col col-6">
                                        <label class="label">Receipt No From <span [style.color]="!receiptNoFromValid?'red':''"><b>*</b></span></label>
                                        <label class="input">
                                            <input type="text" name="receiptNoFrom" placeholder="Receipt No From" NumbersOnly [(ngModel)]="receiptBook.receiptNoFrom" >
                                        </label>
                                        <div *ngIf="!receiptNoFromValid">
                                            <span style="color: red;">Receipt No From is required </span>
                                        </div>

                                    </section>

                                </div>
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="label">Receipt No To <span [style.color]="!receiptNoToValid?'red':''"><b>*</b></span></label>
                                        <label class="input">
                                            <input type="text" name="receiptNoTo" placeholder="Receipt No From" NumbersOnly [(ngModel)]="receiptBook.receiptNoTo">
                                        </label>
                                        <div *ngIf="!receiptNoToValid">
                                            <span style="color: red;">Receipt No To is required </span>
                                        </div>

                                    </section>

                                </div>
                            </fieldset>
                            <footer>
                                <a *ngIf="mode != 'view'" class="btn btn-primary" (click)="saveReceiptBook(receiptBook)">Submit</a>
                                <a class="btn btn-primary" (click)="showHistory()">History</a>
                                <a *ngIf="mode != 'view'" class="btn btn-default" (click)="clearContribution()">Reset</a>
                                <a class="btn btn-danger" (click)="cancelClick()">Cancel</a>
                            </footer>
                        </form>
                        <!--/ Success states for elements -->
                    </div>
                    <!-- end widget content -->
                </div>
                <!-- end widget div -->
            </div>
            <!-- end widget -->
        </article>
        <!-- WIDGET END -->
    </div>
    <!-- end row -->
</section>
<div bsModal #successModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true" [config]="{backdrop: 'static',keyboard:false}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Success Message</h4>
            </div>
            <div class="modal-body" style="overflow-y:scroll">
                <div [innerHTML]="successMessage"></div>
            </div>
            <div class="modal-footer">
                <!--<button type="button" class="btn btn-default" (click)="downloadRecipt()">
                    Download Receipt
                </button>-->
                <button type="button" class="btn btn-primary" (click)="okClick()">
                    Ok
                </button>
            </div>
        </div>
    </div>
</div>
<!--<div bsModal #historyModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true" [config]="{backdrop: 'static',keyboard:false}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" (click)="historyModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Configuration List</h4>
            </div>
            <div class="modal-body" style="max-height:500px; overflow-x:scroll">
                    <table class="table table-striped" [mfData]="configurationData" #mf="mfDataTable" [mfRowsOnPage]="10">
                        <thead>
                            <tr>
                                <th>
                                    <mfDefaultSorter>Action</mfDefaultSorter>
                                </th>
                                <th>
                                    <mfDefaultSorter by="effectiveFromDateString">Effective From Date</mfDefaultSorter>
                                </th>
                                <th>
                                    <mfDefaultSorter by="effectiveToDateString">Effective To Date</mfDefaultSorter>
                                </th>
                                <th>
                                    <mfDefaultSorter by="beneficiaryPFContribution">Beneficiary PF Contribution</mfDefaultSorter>
                                </th>
                                <th>
                                    <mfDefaultSorter by="governmentPFContribution">Government PF Contribution</mfDefaultSorter>
                                </th>
                                <th>
                                    <mfDefaultSorter by="pfLockingPeriodMonths">Lock in Period (Months)</mfDefaultSorter>
                                </th>
                                <th>
                                    <mfDefaultSorter by="inActivePeriodMonths">InActive Period</mfDefaultSorter>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let config of mf.data|grdFilter: {effectiveFromDateString: searchText,effectiveToDateString: searchText, beneficiaryPFContribution: searchText,
       governmentPFContribution: searchText, pfLockingPeriodMonths: searchText, inActivePeriodMonths:searchText,  maturityAge: searchText, averageMonthlyIncome: searchText}; let i=index;">
                                <td class="">
                                    <a (click)="onEditClick(config)" title="Edit" class="txt-color-red"><i class="fa fa-recycle"></i></a>
                                    <a (click)="onViewClick(config)" title="View" class="txt-color-red"><i class="fa fa-check-square-o fa-lg"></i></a>
                                </td>
                                <td>{{config.effectiveFromDateString}}</td>
                                <td>{{config.effectiveToDateString}}</td>
                                <td>{{config.beneficiaryPFContribution}}</td>
                                <td>{{config.governmentPFContribution}}</td>
                                <td>{{config.pfLockingPeriodMonths}}</td>
                                <td>{{config.inActivePeriodMonths}}</td>
                            </tr>
                        </tbody>
                        <tfoot><tr><td colspan="4"><mfBootstrapPaginator></mfBootstrapPaginator></td></tr></tfoot>
                    </table>
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-primary" (click)="submitClick()">
                    Submit
                </button>
            </div>
        </div>
    </div>
</div>-->
