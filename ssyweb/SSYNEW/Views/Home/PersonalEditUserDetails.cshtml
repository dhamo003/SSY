@model SSY.Models.SignUpUser
@{
    ViewBag.Title = "PersonalEditUserDetails";
    Layout = "~/Views/Shared/_LocDashoardLayout.cshtml";
}
<script>
    var Usertypeid = @Html.Raw(Json.Encode(ViewBag.UserType))
    var Result = @Html.Raw(Json.Encode(ViewBag.SucessMes))
    var DeptUserid = @Html.Raw(Json.Encode(ViewBag.DeptUserid))
</script>
<script src="~/Scripts/jquery.min.js"></script>
<style type="text/css">
    .input-label {
        text-align: left !important;
        min-width: 136px !important;
    }
    .logo {
        padding: 15px 0;
        font-size: 25px;
        color: #333;
        font-weight: bold;
    }
    .row > div {
        margin-bottom: 0px !important;
    }
</style>
<br class="clearfix" />
<br class="clearfix" />
@Html.ValidationSummary()
<div class="container">
    <div class="logo" style="text-align: center;">Edit Profile</div>
    @using (Html.BeginForm("PersonalEditUserDetails", "Home", FormMethod.Post, new { onsubmit = "return Validateall()", id = "signup", @class = "form-signin text-left" }))
    {
        @Html.AntiForgeryToken()
        <div class="container-fluid" id="sign">
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">First Name<span style="color: red"> *</span></span>
                            @Html.TextBoxFor(m => m.FirstName, null, new { @class = "form-control  valid", minlength = "3", maxlength = "50", placeholder = "First Name", req = "Req", message = "Please Enter First Name", onkeypress = "return onlyAlphabetswithoutspaces(event,this)", tabindex = "1" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">Last Name <span style="color: red">*</span></span>
                            @Html.TextBoxFor(m => m.LastName, null, new { @class = "form-control  valid", placeholder = "Last Name", minlength = "3", maxlength = "50", req = "Req", message = "Please Enter Last Name", onkeypress = "return onlyAlphabetswithoutspaces(event,this)", tabindex = "2" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">Designation <span style="color: red">*</span></span>
                            @Html.TextBoxFor(m => m.Designation, null, new { @class = "form-control  valid", placeholder = "Designation", maxlength = "50", req = "Req", onkeypress = "return onlyAlphabetswithoutspaces(event,this)", tabindex = "3" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">Mobile Number <span style="color: red">*</span></span>
                            @Html.TextBoxFor(m => m.MobileNumber, null, new { @class = "form-control", @maxlength = 10, placeholder = "Mobile Number", req = "Req",@onchange = "validateMobilenum()", @onkeypress = "return IsNumeric(event);", tabindex = "4", @readonly = "readonly" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">Landline Number <span style="color: red">*</span></span>
                            @Html.TextBoxFor(m => m.Code, null, new { @class = "form-control", @maxlength = 5, placeholder = "Code", req = "Req", message = "Please Enter Mobile Number", @onkeypress = "return IsNumeric(event);", tabindex = "5", style = "width: 72px;", @readonly = "readonly" })
                        </div>
                        @Html.TextBoxFor(m => m.Landline, null, new { @class = "form-control", @maxlength = 8, placeholder = "Number", req = "Req", message = "Please Enter Mobile Number", @onkeypress = "return IsNumeric(event);", tabindex = "6", style = "width: 127px;margin-top :-34px;margin-left :223px;", @readonly = "readonly" })
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">Role </span>
                            @Html.TextBoxFor(m => m.RoleName, null, new { @class = "form-control", req = "Req", tabindex = "5", @readonly = "readonly" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">Email Address </span>
                            @Html.TextBoxFor(m => m.Email, null, new { @class = "form-control ", placeholder = "Email ", req = "Req", message = "Please Enter Email", @onblur = "validateFreeEmail('Email')", @tabindex = "6" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row" id="divdist" style="display:none">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">District</span>
                            @Html.TextBoxFor(m => m.DistName, null, new { @class = "form-control", tabindex = "7", @readonly = "readonly" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row" id="divsubdiv" style="display:none">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">SubDivision </span>
                            @Html.TextBoxFor(m => m.SubdivName, null, new { @class = "form-control", tabindex = "8", @readonly = "readonly" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row" id="divloc" style="display:none">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="input-group extra-space">
                            <span class="input-group-addon input-label">Location</span>
                            @Html.TextBoxFor(m => m.Location, null, new { @class = "form-control", tabindex = "9", @readonly = "readonly" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <center>
                        <button type="submit" id="Save" class="btn btn-sm card-1 inline btn-primary  clearside">Update</button>
                        <a id="signreset" onclick="ClearAll()" class="btn btn-sm card-1 inline btn-danger  clearside">Reset</a>
                    </center>
                </div>
                <div class="col-md-4"></div>
            </div>
        </div>
        <br />
        <br />
    }
</div>
<script>
    $(document).ready(function () {
      
        var typeid =Usertypeid;
        loadusertype(typeid)
        var message = Result;
        if(message !="" )
        {
            alert(message);
            if(message ="User Details Updated Successfully..")
            {
                window.location.href = "/Home/PersonalEditUserDetails";
            }
        }
        if(typeid == "7" ||typeid == "3"||typeid == "4" )
        {
            $.get('@Url.Action("GetMultipleDistricts", "Registration")', { Uid: DeptUserid }, function (dat) {
                 
                var disticts ="";
                $("#disid").find("option").remove();
                $.each(dat, function (i, data) {
                    disticts +=data.Text +",";
                });
                $("#DistName").val(disticts);
            });
        }
        if(typeid == "6")
        {
            var SubdivName = "";
            $.get('@Url.Action("GetMultipleSubDiv", "Registration")', { Uid: DeptUserid }, function (dat) {
                $("#subdivid").find("option").remove();
                $.each(dat, function (i, data) {
                     
                    SubdivName +=data.Text +",";
                });
                $("#SubdivName").val(SubdivName);
            });
        }
        if(typeid == "5")
        {
            var Location = "";
            $.get('@Url.Action("GetMultipleLoca", "Registration")', { Uid: DeptUserid }, function (dat) {
                $.each(dat, function (i, data) {
                     
                    Location +=data.Text +",";
                });
                $("#Location").val(Location);
            });
        }
    });
    function loadusertype(typeid) {
        if (typeid == 5) {
            $('#divloc').show();
            $('#divdist').show();
            $('#divsubdiv').show();
        }
        if (typeid == 6) {
            $('#divloc').hide();
            $('#divdist').show();
            $('#divsubdiv').show();
        }
        if (typeid == 7 || typeid == "3" ||typeid == "4") {
            $('#divloc').hide();
            $('#divdist').show();
            $('#divsubdiv').hide();
        }
    }
    function Validateall() {
        if ($("#FirstName").val() == "" || $("#FirstName").val() == null) {
            alert("Please Enter First Name");
            $("#FirstName").focus();
            return false;
        }
        if ($("#LastName").val() == "" || $("#LastName").val() == null) {
            alert("Please Enter Last Name");
            $("#LastName").focus();
            return false;
        }
        if ($("#Designation").val() == "" || $("#Designation").val() == null) {
            alert("Please Enter Designation");
            $("#Designation").focus();
            return false;
        }
        if ($("#MobileNumber").val() == "" || $("#MobileNumber").val() == null) {
            alert("Please Enter Mobile Number");
            $("#MobileNumber").focus();
            return false;
        }
        if ($("#MobileNumber").val().length != 10) {
            alert("Please Enter 10 digit Mobile Number");
            $("#MobileNumber").focus();
            return false;
        }
    }
    function onlyAlphabetswithoutspaces(e, t) {
      
        try {
            if (window.event) {
                var charCode = window.event.keyCode;
            }
            else if (e) {
                var charCode = e.which;
            }
            else { return true; }
            if ((charCode > 64 && charCode < 91) || (charCode > 96 && charCode < 123) || (charCode == 46))
                return true;
            else
                return false;
        }
        catch (err) {
            alert(err.Description);
        }
    }
    function validateMobilenum(){
         
      
        var x = $("#MobileNumber").val();
    
        if(x[0] !="7" && x[0] !="8" && x[0] !="9" )
        {
            alert("Invalid Mobile Number");
            $("#MobileNumber").focus();
            return false;
        }
    }
    function validateFreeEmail(Email) {
         
        var email= $('#' + Email + '').val();
        var reg = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        if (reg.test(email)) {
            return true;
        }
        else {
            alert('Please Enter Valid Email Id ');
            $('#' + Email + '').val('');
            $("#Email").focus();
            return false;
        }
    }
    function fnValidateEmail(Obj) {
      
        var email = Obj.value;
        if (email == "") {
            return false;
        }
     
    }
    function ClearAll()
    {
        
        window.location.href = "/Home/PersonalEditUserDetails";
    }
</script>
