@{
    ViewBag.Title = "Districtabstractreport";
    Layout = "~/Views/Shared/_LocDashoardLayout.cshtml";
}
<script>
    var UserTypeid = @Html.Raw(Json.Encode(ViewBag.UserType))
    var Deptuserid = @Html.Raw(Json.Encode(ViewBag.DeptId))
</script>

<style>
    th {
        font-size: 13px;
        color: white;
    }

    td {
        font-size: 13px;
    }

    .dataTables_length {
        display: none;
    }

    th {
        white-space: nowrap;
    }

    .dataTables_filter {
        margin-left: 1000px;
    }

  
</style>
<link href="~/Content/ssy_css/dataTables.bootstrap.min.css" rel="stylesheet" />

<link href="~/Content/ssy_css/bootstrap.min.css" rel="stylesheet" />


<link href="~/Content/my_css/buttons.dataTables.min.css" rel="stylesheet" />


<script src="~/Scripts/jquery.js"></script>

<script src="~/Content/ssy_js/jquery.dataTables.min.js"></script>

<script src="~/Content/ssy_js/dataTables.bootstrap.min.js"></script>



<script src="~/Content/ssy_js/dataTables.buttons.min.js"></script>
<script src="~/Content/ssy_js/buttons.flash.min.js"></script>
<script src="~/Content/ssy_js/jszip.min.js"></script>
<script src="~/Content/ssy_js/pdfmake.min.js"></script>
<script src="~/Content/ssy_js/vfs_fonts.js"></script>
<script src="~/Content/ssy_js/buttons.html5.min.js"></script>
<script src="~/Content/ssy_js/buttons.print.min.js"></script>


<style>
    /*th {
        font-size: 13px;
    }
    td {
        font-size: 13px;
    }*/
    .dt-buttons a {
        background: #094c86 !important;
        color:white !important;
    }
</style>

<div class="container-fluid" style="margin-left:25px;">
    <center><font size="4"><b>Abstract Report</b></font></center>

    <div class="row">
        <div class="col-md-12 column">
            <div class="container-fluid">

                <iframe name="ifr" id="ifr" style="width: 100%;height:500px; position: relative; border: none; margin-bottom:5%;margin-left:50px;margin-right:150px;padding-right:50px; max-height: 400px;overflow-y:auto; border-radius: 0px; "></iframe>
            </div>
        </div>
    </div>

    @*<table class="TblAbstract  table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>District Name</th>
                <th>SSIN Count</th>
                <th>Applications Received</th>
                <th>Applications Approved</th>
                <th>Applications Rejected</th>
                <th>Applications Pending</th>
                <th>Applications Sent Back</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>*@
</div>

<div class="loader" style="display:none;">
    <center>
        <img class="loading-image" src="~/Content/images/ajax-loader.gif" alt="loading.." style="width:30px;height:30px;">
    </center>
</div>
<script>
    $(document).ready(function () {

        var url = "/SSYIDCard/AbstractReport.aspx?usertype=" + UserTypeid + "&deptuserid=" + Deptuserid;


        $('iframe#ifr').attr('src', url);

        @*$.get('@Url.Action("GetDistabstractreport", "Report")', {}, function (result) {
             
            var table = $('.TblAbstract').DataTable();
            table.destroy();

            $('.TblAbstract tbody').empty();
            var Recieved = 0;
            var Approved = 0;
            var Rejected = 0;
            var SentBack = 0;
            var Pending = 0;
            var ssincnt = 0;
            $.each(result, function (i, data) {
                var num = i + 1;
                Recieved = Recieved + data.Received;
                Approved = Approved + data.Approved;
                Rejected = Rejected + data.Rejected;
                SentBack = SentBack + data.SentBack;
                Pending = Pending + data.Pending;
                ssincnt = ssincnt + data.SsinGen;

                $('.TblAbstract').append('<tr><td class="thtext"><a href="#" onClick = "GetReport(' + data.DistrictId + ');">' + data.DistrictName + '</a></td><td class="thnum">' + data.SsinGen + '</td><td class="thnum">' + data.Received + '</td><td class="thnum">' + data.Approved + '</td><td class="thnum">' + data.Rejected + '</td><td class="thnum">' + data.Pending + '</td><td class="thnum">' + data.SentBack + '</td></tr>')

            });

            $('.TblAbstract').append('<tr><td class="thtext"> TOTAL </td><td class="thnum">' + ssincnt + '</td><td class="thnum">' + Recieved + '</td><td class="thnum">' + Approved + '</td><td class="thnum">' + Rejected + '</td><td class="thnum">' + Pending + '</td><td class="thnum">' + SentBack + '</td></tr>')

            $(".loader").hide();

            $('.TblAbstract').DataTable({

                dom: 'Bfrtip',

                "ordering": false,

                buttons: [
                    {


                        extend: 'excel',

                        text: 'Download Excel'
                    }
                ]
            });
        });

       // $('th').css("background", "#87CEEB");
        //$('th').css("color", "#ffffff");

        $(".loader").show();*@
    });

    function GetReport(id) {

        window.location.href = "Subdivabstractreport?DistrictId=" + id;

    }


    function Download()
    {

      $.get('@Url.Action("DownloadRequest", "Report")', {SelectUserid:ValuSend, Districtid: $("#disid").val(), Subdivid: SendSubDiv, Locid: SendLocation, Fromdate: $("#fromdate").val(), Todate: $("#todate").val(),schemeid:$("#schemeid").val(),SchemeStatus : $("#SchemeStatus").val(),UserCategryid :$("#Typeid").val(),selectusertype:$("#Roleid").val(), userid:SelUserid,ReportName : "Detailed Report",Value : Value}, function (result) {

          alert(result);
      })
    }
</script>
