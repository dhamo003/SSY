@model SSY.Models.Reports
@{
	ViewBag.Title = "SloMappingReport";
	Layout = "~/Views/Shared/_LocDashoardLayout.cshtml";
}

<link href="~/Content/ssy_css/smoothness.jquery-ui.css" rel="stylesheet" />
<link href="~/Content/my_css/dataTables.jqueryui.min.css" rel="stylesheet" />
<link href="~/Content/my_css/buttons.dataTables.min.css" rel="stylesheet" />
<link href="~/Content/ssy_css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="~/Content/ssy_css/font-awesome.min.css" rel="stylesheet" />
<script src="~/Content/ssy_js/jquery.js"></script>
<script src="~/Content/ssy_js/jquery.dataTables.min.js"></script>
<script src="~/Content/ssy_js/dataTables.bootstrap.min.js"></script>
<script src="~/Content/ssy_js/dataTables.buttons.min.js"></script>
<script src="~/Content/ssy_js/buttons.flash.min.js"></script>
<script src="~/Content/ssy_js/jszip.min.js"></script>
<script src="~/Content/ssy_js/pdfmake.min.js"></script>
<script src="~/Content/ssy_js/vfs_fonts.js"></script>
<script src="~/Content/ssy_js/buttons.html5.min.js"></script>
<script src="~/Content/ssy_js/buttons.print.min.js"></script>
<script src="~/Content/ssy_js/bootstrap-multiselect.js"></script>
<script src="~/Content/ssy_js/jquery.js"></script>
<link href="~/Content/ssy_css/bootstrap-multiselect.css" rel="stylesheet" />
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">


<script>
    var UserTypeid = @Html.Raw(Json.Encode(ViewBag.usertype))
    var Deptid = @Html.Raw(Json.Encode(ViewBag.deptid))
    var RepSubDVision ="";
    var RepLocation ="";
    var SendSubDiv ="";
    var SendLocation ="";
    var LoadRoles ="";
    var    path ="";
    var ValuSend = "";
    var SelUserid = 0;
    var Value = "";
    var disticts = "";

    var GpList = "";
    var PsList = "";
    var PoList = "";


    var SendGp = "";
    var SendPs = "";
    var SendPo = "";

</script>
<style>
	#fromdate, #todate {
		/*position:absolute;*/
		z-index: 1000;
	}

	.Dropdwn {
		width: 185px;
		height: 33px;
	}

	th {
		font-size: 13px;
	}

	td {
		font-size: 13px;
	}

	.dt-buttons a {
		background: #8BC34A !important;
	}

	.dropdown-toggle, .dropdown-menu {
		width: 200px !important;
	}

	.dropdown-menu {
		position: absolute;
		z-index: 9999;
		max-height: 250px;
		overflow-y: auto;
		overflow-x: hidden;
	}

	#loading-img {
		/*background : url('/Content/pleasewait.gif') center center no-repeat;*/
		height: 100%;
		z-index: 20;
		width: 100%;
	}

	#Div1 {
		width: 1220px !important;
		height: 500px !important;
		overflow: scroll;
		white-space: nowrap;
		margin-left: 35px;
	}

	.loader {
		background: #e9e9e9;
		display: none;
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		opacity: 0.5;
	}

	.dataTables_filter {
		display: none;
	}

	.dataTables_processing {
		background-color: green !important;
		color: black !important;
		border-color: white !important;
	}
</style>


<div class="loader">


	<div id="loading-img">
		<center><img src="~/Content/pleasewait.gif" /></center>
		@* background: url(~/Content/pleasewait.gif) center center no-repeat;*@



	</div>

</div>
<div class="container-fluid" id="sign">
	<marquee scrollamount="7"><font color="green" size="3"><b>Report can be viewed for a date range of one month,if date range is more than one month please click on download.</b></font></marquee>

	<div class="logo" style="text-align: center;"><h3><b>SLO Mapping Report</b></h3></div>
	<div class="col-sm-12">
		<div class="col-md-3">
			<div class="form-group">
				<div class="input-group extra-space">
					<span class="input-group-addon input-label">District</span>
					@Html.DropDownListFor(m => m.disid, new SelectList(Model.district, "Value", "Text"), new { @class = "form-control", @tabindex = "6" })
				</div>
			</div>
		</div>
		<div class="col-md-3" id="">
			<div class="form-group">
				<div class="input-group extra-space">
					<span class="input-group-addon input-label">Sub Division</span>
					@Html.DropDownListFor(m => m.subdivid, new SelectList(Model.subdivision, "Value", "Text"), new { @class = "form-control", @tabindex = "7" })
				</div>
			</div>
		</div>
		<div class="col-md-3" id="">
			<div class="form-group">
				<div class="input-group extra-space">
					<span class="input-group-addon input-label">Location</span>
					@Html.DropDownListFor(m => m.muncorp, new SelectList(Model.muncorpname, "Value", "Text"), new { @class = "form-control Location", id = "Location", @tabindex = "8" })
				</div>
			</div>
		</div>

		<div class="col-md-3" id="">
			<div class="form-group">
				<div class="input-group extra-space">
					<span class="input-group-addon input-label">GP/Ward</span>
					@Html.DropDownListFor(m => m.ward, new SelectList(Model.wardname, "Value", "Text"), new { @class = "form-control ward", id = "ward" })
				</div>
			</div>

		</div>
		<div class="col-md-3">
			<div class="form-group">
				<div class="input-group extra-space">
					<span class="input-group-addon input-label">Worker Type</span>
					@Html.DropDownList("schemeid", new List<SelectListItem>
										{
											 //new SelectListItem{ Text="-- Select Worker Type --", Value = "0" },
											  new SelectListItem{ Text="ALL", Value = "ConstructionWorker,TransportWorker,Others" },
											new SelectListItem{ Text="Construction Worker", Value = "ConstructionWorker" },
											 new SelectListItem{ Text="Transport Worker", Value = "TransportWorker" },
											  new SelectListItem{ Text="Other Worker", Value = "Others" }
										}, new { @class = "form-control" })
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="form-group">
				<div class="input-group extra-space">
					<span class="input-group-addon input-label">Registration Type</span>
					@Html.DropDownList("RegTypeid", new List<SelectListItem>
										{
											 //new SelectListItem{ Text="-- Select Worker Type --", Value = "0" },
											  new SelectListItem{ Text="ALL", Value = "CAF Updated,CAF not Update,Partially Filled,Completely Filled" },
											new SelectListItem{ Text="CAF Updated", Value = "CAF Updated" },
											 new SelectListItem{ Text="CAF not Update", Value = "CAF not Update" },
											  new SelectListItem{ Text="Partially Filled", Value = "Partially Filled" },
											  new SelectListItem{ Text="Completely Filled", Value = "Completely Filled" }
										}, new { @class = "form-control" })
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<div class="form-group">
				<div class="input-group extra-space">
					<span class="input-group-addon input-label">From Date</span>
					@Html.TextBoxFor(m => m.fromdate, new { @class = "form-control" })
				</div>
			</div>
		</div>
		<div class="col-md-3">
			<div class="form-group">
				<div class="input-group extra-space">
					<span class="input-group-addon input-label">To Date</span>
					@Html.TextBoxFor(m => m.todate, new { @class = "form-control" })
				</div>
			</div>
		</div>

		<div class="col-md-3">
			<a class="btn btn-primary" onclick="GetRepData()">Submit</a>
			<a class="btn btn-primary" style="margin-left: 10px;" onclick="GetDwnld()">Download</a>

		</div>

	</div>

	<div class="container-fluid" id="Div1" style="margin-top : 10px;">
		<div class="row">
			<div class="col-md-12">

				<div id="tbldistrict" style="height:350px;">
					<iframe name="ifr" id="ifr" style="width: 103%;height:100%; position: relative; border: none; margin-bottom:5%;margin-left:22px;margin-right:150px;padding-right:50px; max-height: 400px;overflow-y:auto; border-radius: 0px; "></iframe>
				</div>
			</div>
		</div>
		
		<input type="hidden" id="BenSno" value="0" name="BenSno" />
	</div>

	<br />
	<br />


</div>
<script>
    $(document).ready(function () {
        //$("#Typeid").val("-1");
        //$("#Roleid").val("-1");
        //$("#Userid").val("-1");
        getdates();
  //      var tblheader= "";
  //      var users = "";
  //      var senduseridrep  = $("#Userid").val();
  //      var lengthrep = $('#Userid').children('option').length;
  //      if(senduseridrep.length == lengthrep)
  //          users = "All";
  //      else
  //          users = $("#Userid option:selected").text();
		//if (UserTypeid == 1 || UserTypeid == 5 || UserTypeid == 21 || UserTypeid == 22 || UserTypeid == 23)
  //          tblheader = "District : " +$("#disid option:selected").text()+" , "+" Sub Division : "+$("#subdivid option:selected").text() +" , "+" Location : "+$("#Location option:selected").text() +"\n\n"+ "UserType : " +$("#Typeid option:selected").text()+" , "+ "Role : " +$("#Roleid option:selected").text()+" , "+ "User : " +users+"\n\n"+" Worker Type : "+$("#schemeid option:selected").text()+", Status : "+$("#SchemeStatus option:selected").text()+"\n\n"+" From Date : " + $("#fromdate").val() +" , "+" To Date :" +$("#todate").val();
  //      if(UserTypeid == 7 ||UserTypeid == 3 || UserTypeid == 4)
  //          tblheader = "District : " +$("#disid option:selected").text()+"\n\n"+ "UserType : " +$("#Typeid option:selected").text()+" , "+ "Role : " +$("#Roleid option:selected").text()+" , "+ "User : " +users +"\n\n"+" Worker Type : "+$("#schemeid option:selected").text()+", Status : "+$("#SchemeStatus option:selected").text()+"\n\n"+" From Date : " + $("#fromdate").val() +"  "+", To Date : " +$("#todate").val();
  //      if(UserTypeid == 6)
  //          tblheader = "District : " +$("#disid option:selected").text() +" , "+" Sub Division : "+$("#subdivid option:selected").text() +" , "+" Location : "+$("#Location option:selected").text() +"\n\n"+ "UserType : " +$("#Typeid option:selected").text()+" , "+ "Role : " +$("#Roleid option:selected").text()+" , "+ "User : " +users +"\n\n"+" Worker Type : "+$("#schemeid option:selected").text()+", Status : "+$("#SchemeStatus option:selected").text()+"\n\n"+" From Date : " + $("#fromdate").val() +"  "+", To Date : " +$("#todate").val();

        //Asst  Labour Com
        if(UserTypeid == 6)
        {
            $("#disid").attr("disabled", true);
        }

        // Deputy Labour Com , Additional LC , Joint LC
        if(UserTypeid == 7 || UserTypeid == 3 || UserTypeid == 4)
        {
            $("#divloc").hide();
            $("#divsub").hide();
        }

        //Inspector
        if(UserTypeid == "5")
        {
             
            $.get('@Url.Action("GetMultipleLoca", "Registration")', { Uid: Deptid }, function (dat) {
                $("#Location").find("option").remove();
                $("#Location").append("<option value=-1> " + "ALL" + " </option>");
                RepLocation = "";
                $.each(dat, function (i, data) {
                     
                    $("#Location").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                    RepLocation +=  data.Value +",";
				});
				//alert("bef ps");
				//loadPS();
				//loadperPO();
				loadGP();
				//alert("af po");
            });
        }

        //Asst  Labour Com
        if(UserTypeid == "6")
        {
            $.get('@Url.Action("GetMultipleSubDiv", "Registration")', { Uid: Deptid }, function (dat) {
                $("#subdivid").find("option").remove();
                $("#subdivid").append("<option value=-1> " + "ALL" + " </option>");
                RepSubDVision = "";
                $.each(dat, function (i, data) {
                     
                    $("#subdivid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                    RepSubDVision +=  data.Value +"," ;
                });
                if(UserTypeid == "6")
                {
                    GetAlcLocations()
				}
				//loadPS();
				//loadperPO();
				loadGP();
            });
        }

        // Deputy Labour Com , Additional LC , Joint LC
        if(UserTypeid == "7" || UserTypeid == "3" || UserTypeid == "4")
        {
            $.get('@Url.Action("GetMultipleDistricts", "Registration")', { Uid: Deptid}, function (dat) {
                 
                 //disticts ="";
                $("#disid").find("option").remove();

                $("#disid").append("<option value=0> " + "Select District" + " </option>");
                $.each(dat, function (i, data) {
                    $("#disid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                   // disticts +=  data.Value +"," ;
                });
			});
			//loadPS();
			//loadperPO();
			loadGP();
        }
    })

    function GetRepData() {
         

		if (UserTypeid == 1 || UserTypeid == 2 || UserTypeid == 21 || UserTypeid == 22 || UserTypeid == 23 || UserTypeid == 24)
        {
            if ($("#disid").val() == "" || $("#disid").val() == null||$("#disid").val() == "0" ) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == "" || $("#subdivid").val() == null|| $("#subdivid").val() == "0") {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == "" || $("#Location").val() == null ||$("#Location").val() == "0" ) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 5) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == 0 || $("#subdivid").val() == "" || $("#subdivid").val() == null) {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == 0 || $("#Location").val() == "" || $("#Location").val() == null) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 6) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == 0 || $("#subdivid").val() == "" || $("#subdivid").val() == null) {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == 0 || $("#Location").val() == "" || $("#Location").val() == null) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 7 || UserTypeid == 3 || UserTypeid == 4) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
   // Date validations
        var arr1 = $('#fromdate').val().split('-');
        var arr2 = $('#todate').val().split('-');
        var startDate = new Date(arr1[1] +"-"+arr1[0] + "-"+arr1[2]);
        var endDate = new Date(arr2[1] +"-"+arr2[0] + "-"+arr2[2]);

        // alert(endDate - startDate);

        var diffDate = (endDate - startDate)/1000/60/60/24;

        //alert(diffDate);

        if (diffDate > 31 || diffDate < 0){

            alert("Report can be viewed for a date range of one Month");

            return false;

        }
         
        var selectedUserid = $("#Userid option:selected").text();
        var senduserid  = $("#Userid").val();
        var length = $('#Userid').children('option').length;
        ValuSend = "";
        SendSubDiv = "";
        SendLocation = "";
        Value = "1";
        if($("#subdivid").val() == "-1")
        {
            SendSubDiv =   RepSubDVision;
        }
        else
        {
            SendSubDiv = $("#subdivid").val();
        }
        if($("#Location").val() == "-1")
        {
            SendLocation =   RepLocation ;
        }
        else
        {
            SendLocation = $("#Location").val();
        }
        // Gp List
        if ($("#ward").val() == "-1") {
            SendGp = GpList;
        }
        else {
            SendGp = $("#ward").val();
		}


		GetReport(SendSubDiv, SendLocation, SendGp)

		
    }


	function GetReport(SendSubDiv, SendLocation, SendGp) {

		var url = "/SSYIDCard/BeneficiarySLOMappingReport.aspx?DistrictId=" + $("#disid").val() + "&SubDivisionId=" + SendSubDiv + "&blockid=" + SendLocation + "&Gpward=" + SendGp + "&schemes=" + $("#schemeid").val() + "&Regtyp=" + $("#RegTypeid").val()+ "&fromdate=" + $('#fromdate').val() + "&todate=" + $('#todate').val();
		$('iframe#ifr').attr('src', url);


	}


    function getdates() {
        $("#fromdate,#todate").datepicker({
            dateFormat: "dd-mm-yy",
            changeYear: true,
            yearRange: "1960:2020",
            autoclose: true,
            maxDate: new Date()
        })
        var dat = new Date();
        var month = (dat.getMonth() + 1) < 10 ? '0' + (dat.getMonth() + 1) : '' + (dat.getMonth() + 1);
        var day = (dat.getDate()) < 10 ? '0' + (dat.getDate()) : '' + (dat.getDate());
        var today = day + "-" + month + "-" + dat.getFullYear();
        $("#fromdate,#todate").val(today);
    }
    //Get Detailed Report
    //Load Subdivision
    $("#disid").change(loadSubdiv);
    function loadSubdiv() {

        $.get('@Url.Action("GetSubdivisionJSON", "Login")', { ID: $("#disid").val() }, function (dat) {
            $("#subdivid").find("option").remove();
            $("#subdivid").append("<option value=-1>ALL</option>");
            RepSubDVision = "";
            $.each(dat, function (i, data) {
                 
                if(data.Value !="0")
                    $("#subdivid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                RepSubDVision +=  data.Value +",";
            });
            loadGP();

        });
        // get blocks
        $.get('@Url.Action("GetblockforDisRepJSON", "Report")', { ID: $("#disid").val() }, function (dat) {
             
            $("#Location").find("option").remove();
            RepLocation = "";
            $.each(dat, function (i, data) {
                 
                $("#Location").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                RepLocation +=  data.Value +",";
            });
        });

        //loadPS();
        //loadperPO();

    }
    //Load Blocks
    $("#subdivid").change(loadBlock);
    function loadBlock() {
         
        var val = $("#subdivid").val();
        if(val == "-1")
        {
            GetAlcLocations()
        }
        else
        {
            $.get('@Url.Action("GetblockforSubRepJSON", "Report")', { ID: $("#subdivid").val() }, function (dat) {
                 
                $("#Location").find("option").remove();
                $("#Location").append("<option value=-1>ALL</option>");
                RepLocation = "";
                $.each(dat, function (i, data) {
                     
                    if(data.Value !="0")
                        $("#Location").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                    RepLocation +=  data.Value +",";
                });
            });
        }

        loadGP();
    }

    //Load Alc Locations
    function GetAlcLocations()
    {
        $.get('@Url.Action("GetBlocksBySubDivision", "Report")', { ID:RepSubDVision }, function (dat) {
             
            $("#Location").find("option").remove();
            RepLocation = "";
            $.each(dat, function (i, data) {
                 
                $("#Location").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                RepLocation +=  data.Value +",";
            });
        });
    }

    function GetDwnld() {
		if (UserTypeid == 1 || UserTypeid == 2 || UserTypeid == 21 || UserTypeid == 22 || UserTypeid == 23 || UserTypeid == 24)
        {
            if ($("#disid").val() == "" || $("#disid").val() == null||$("#disid").val() == "0" ) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == "" || $("#subdivid").val() == null|| $("#subdivid").val() == "0") {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == "" || $("#Location").val() == null ||$("#Location").val() == "0" ) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 5) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == 0 || $("#subdivid").val() == "" || $("#subdivid").val() == null) {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == 0 || $("#Location").val() == "" || $("#Location").val() == null) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 6) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == 0 || $("#subdivid").val() == "" || $("#subdivid").val() == null) {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == 0 || $("#Location").val() == "" || $("#Location").val() == null) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 7 || UserTypeid == 3 || UserTypeid == 4) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
           if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
		}
		
         
        var selectedUserid = $("#Userid option:selected").text();
        var senduserid  = $("#Userid").val();
        var length = $('#Userid').children('option').length;
        ValuSend = "";
        SendSubDiv = "";
        SendLocation = "";
        Value = "1";

        if($("#subdivid").val() == "-1")
        {
            SendSubDiv =   RepSubDVision;
        }
        else
        {
            SendSubDiv = $("#subdivid").val();
        }
        if($("#Location").val() == "-1")
        {
            SendLocation =   RepLocation ;
        }
        else
        {
            SendLocation = $("#Location").val();
        }
        var SelectedUSerid = $("#Userid option:selected");

        SelUserid = 1;
        SelectedUSerid.each(function () {
             
            var res =     $(this).val();
            ValuSend += $(this).val()+",";
        });
		
        //if(length == senduserid.length )
        //{
        //    Value = 0;
        //}
		
        // Gp List
        if ($("#ward").val() == "-1") {
            SendGp = GpList;
        }
        else {
            SendGp = $("#ward").val();
        }
		

        //var senduseridrep  = $("#Userid").val();
        //var lengthrep = $('#Userid').children('option').length;
        //if(senduseridrep.length == lengthrep)
        //    users = "All";
        //else
        //    users = $("#Userid option:selected").text();

        $.get('@Url.Action("DownloadDetailReport", "Report")', { SelectUserid: ValuSend, Districtid: $("#disid").val(), Subdivid: SendSubDiv, Locid: SendLocation, Fromdate: $("#fromdate").val(), Todate: $("#todate").val(), schemeid: $("#schemeid").val(), SchemeStatus: $("#SchemeStatus").val(), UserCategryid: "", selectusertype: "", userid: SelUserid, ReportName: "SLO Mapping Report", Value: Value, FormStatus: "", GpList: SendGp, PoList: "", PsList: "", Religion: ""}, function (result) {

            alert(result);
        })
    }
    
     
    function loadGP() {
        
        var val = $("#subdivid").val();
        if (val == "-1") {
            $.get('@Url.Action("GetGPBasedOnDistrict", "Registration")', { ID: $("#disid").val() }, function (dat) {
                $("#ward").find("option").remove();

                GpList = "";
                $.each(dat, function (i, data) {
                     
                    $("#ward").append("<option value=" + data.Value + "> " + data.Text + " </option>");

                    GpList += data.Value + ",";
                });

                GpList += "0" + ",";
                GpList += "9999" + ",";

             //   $("#ward").append("<option value=" + "-1" + "> " + "ALL" + " </option>");

            });
        }
        else {


            $.get('@Url.Action("GetGPAll", "Registration")', { ID: $("#subdivid").val() }, function (dat) {
                $("#ward").find("option").remove();
                GpList = "";
                $.each(dat, function (i, data) {
                     
                   // if (data.Value != "0")
                    $("#ward").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                    GpList += data.Value + ",";
                });

            });

            GpList += "0" + ",";
            GpList += "9999" + ",";

        }

      
    }
</script>
