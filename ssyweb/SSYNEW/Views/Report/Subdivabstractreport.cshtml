@{
    ViewBag.Title = "Subdivabstractreport";
    Layout = "~/Views/Shared/_LocDashoardLayout.cshtml";
}

<style>
    th {
        font-size: 13px;
        color: white;
    }
    td {
        font-size: 13px;
    }
    .dataTables_length {
        display: none;
    }
    th {
        white-space: nowrap;
    }

    .dataTables_filter {
        margin-left:1000px;
    }
      .dt-buttons a {
       background: #094c86 !important;
        color:white !important;
    }
</style>
<script>
    var DistrictId = @Html.Raw(Json.Encode(ViewBag.DistrictId))
</script>
<link href="~/Content/ssy_css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/ssy_css/bootstrap.min.css" rel="stylesheet" />

<link href="~/Content/my_css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery.js"></script>
<script src="~/Content/ssy_js/jquery.dataTables.min.js"></script>
<script src="~/Content/ssy_js/dataTables.bootstrap.min.js"></script>

<script src="~/Content/ssy_js/dataTables.buttons.min.js"></script>
<script src="~/Content/ssy_js/buttons.flash.min.js"></script>
<script src="~/Content/ssy_js/jszip.min.js"></script>
<script src="~/Content/ssy_js/pdfmake.min.js"></script>
<script src="~/Content/ssy_js/vfs_fonts.js"></script>
<script src="~/Content/ssy_js/buttons.html5.min.js"></script>
<script src="~/Content/ssy_js/buttons.print.min.js"></script>

<div class="container-fluid" style="margin-left:25px;">
    <a href="/Report/Districtabstractreport" class="btn btn-primary glyphicon glyphicon-fast-backward" style="margin-left: 1101px;margin-bottom: 15px;">  Back</a>
    <center><font size="4"><b>Sub Division Wise Abstract</b></font></center>
    <table class="TblSDAbstract  table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Sub division Name</th>
                <th>SSIN Count</th>
                <th>Applications Received</th>
                <th>Applications Approved</th>
                <th>Applications Rejected</th>
                <th>Applications Pending</th>
                <th>Applications Sent Back</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
    <div class="loader" style="display:none;">
            <center>
                <img class="loading-image" src="~/Content/images/ajax-loader.gif" alt="loading.." style="width:30px;height:30px;">
            </center>
        </div>
<script>
    $(document).ready(function () {
        $(".loader").show();
        $.get('@Url.Action("GetSDabstractreport", "Report")', {DistrictId :DistrictId}, function (result) {
             
            var table = $('.TblSDAbstract').DataTable();
            table.destroy();
            $('.TblSDAbstract tbody').empty();
            var Recieved = 0;
            var Approved = 0;
            var Rejected = 0;
            var SentBack = 0;
            var Pending = 0;
            var ssincnt = 0;
            $.each(result, function (i, data) {
                var num = i + 1;
                Recieved = Recieved + data.Received;
                Approved = Approved + data.Approved;
                Rejected = Rejected + data.Rejected;
                SentBack = SentBack + data.SentBack;
                Pending = Pending + data.Pending;
                ssincnt = ssincnt + data.SsinGen;
                $('.TblSDAbstract').append('<tr><td class="thtext"> <a href="#" onClick = "GetReport(' + data.SubDivisionSno + ');">' + data.SubDivisionName + '</a></td><td class="thnum">' + data.SsinGen + '</td><td class="thnum">' + data.Received + '</td><td class="thnum">' + data.Approved + '</td><td class="thnum">' + data.Rejected + '</td><td class="thnum">' + data.Pending + '</td><td class="thnum">' + data.SentBack + '</td></tr>')
            });
            $('.TblSDAbstract').append('<tr><td class="thtext"> TOTAL </td><td class="thnum">' + ssincnt + '</td><td class="thnum">' + Recieved + '</td><td class="thnum">' + Approved + '</td><td class="thnum">' + Rejected + '</td><td class="thnum">' + Pending + '</td><td class="thnum">' + SentBack + '</td></tr>')
            $(".loader").hide();
            $('.TblSDAbstract').DataTable({
                dom: 'Bfrtip',
                "ordering": false,
                buttons: [
                    {

                   
                        extend :  'excel',
                        text: 'Download Excel'
                    }
                ]

            });
           // $('th').css("background", "#87CEEB");
           // $('th').css("color", "#ffffff");
        });
    });
    function GetReport(id)
    {
        window.location.href = "LocationWiseAbstract?SubDivId=" + id;
    }
</script>
