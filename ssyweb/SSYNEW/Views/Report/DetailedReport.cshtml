@model SSY.Models.Reports
@{
    ViewBag.Title = "Detailed Report";
    Layout = "~/Views/Shared/_LocDashoardLayout.cshtml";
}





<link href="~/Content/ssy_css/smoothness.jquery-ui.css" rel="stylesheet" />
<link href="~/Content/my_css/dataTables.jqueryui.min.css" rel="stylesheet" />
<link href="~/Content/my_css/buttons.dataTables.min.css" rel="stylesheet" />


<link href="~/Content/ssy_css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="~/Content/ssy_css/font-awesome.min.css" rel="stylesheet" />

<script src="~/Content/ssy_js/jquery.js"></script>

<script src="~/Content/ssy_js/jquery.dataTables.min.js"></script>
<script src="~/Content/ssy_js/dataTables.bootstrap.min.js"></script>




<script src="~/Content/ssy_js/buttons.flash.min.js"></script>
<script src="~/Content/ssy_js/jszip.min.js"></script>
<script src="~/Content/ssy_js/pdfmake.min.js"></script>
<script src="~/Content/ssy_js/vfs_fonts.js"></script>

<script src="~/Content/ssy_js/buttons.html5.min.js"></script>
<script src="~/Content/ssy_js/buttons.print.min.js"></script>
<script src="~/Content/ssy_js/bootstrap-multiselect.js"></script>


<script src="~/Content/ssy_js/jquery.js"></script>
<link href="~/Content/ssy_css/bootstrap-multiselect.css" rel="stylesheet" />



<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">




<link href="~/Scripts/jtable/themes/metro/blue/jtable.min.css" rel="stylesheet" />
@*<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />*@
<link href="http://jtable.org/Content/themes/metroblue/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>"
<!--Adding jTable Plugin-->
<script src="~/Scripts/jtable/jquery.jtable.min.js"></script>


<script src="~/Content/ssy_js/dataTables.buttons.min.js"></script>

<style>
    #fromdate, #todate {
        /*position:absolute;*/
        z-index: 1000;
    }

    .Dropdwn {
        width: 185px;
        height: 33px;
    }

    th {
        font-size: 13px;
    }

    td {
        font-size: 13px;
    }

    .dt-buttons a {
        background: #8BC34A !important;
    }

    .dropdown-toggle, .dropdown-menu {
        width: 200px !important;
    }

    .dropdown-menu {
        position: absolute;
        z-index: 9999;
        max-height: 250px;
        overflow-y: auto;
        overflow-x: hidden;
    }

    #loading-img {
        /*background : url('/Content/pleasewait.gif') center center no-repeat;*/
        height: 100%;
        z-index: 20;
        width: 100%;
    }

    #Div1 {
        width: 1220px !important;
        height: 500px !important;
        overflow: scroll;
        white-space: nowrap;
        margin-left: 35px;
    }

    .loader {
        background: #e9e9e9;
        display: none;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        opacity: 0.5;
    }

    .dataTables_filter {
        display: none;
    }

    .dataTables_processing {
        background-color: green !important;
        color: black !important;
        border-color: white !important;
    }





    .scroll-content {
        overflow-y: auto;
        width: 100%;
    }

    div.jtable-main-container {
        height: 100%;
    }
</style>


<script>
    var UserTypeid = @Html.Raw(Json.Encode(ViewBag.usertype));
    var Deptid = @Html.Raw(Json.Encode(ViewBag.deptid));
    var RepSubDVision ="";
    var RepLocation ="";
    var SendSubDiv ="";
    var SendLocation ="";
    var LoadRoles ="";
    var    path ="";
    var ValuSend = "";
    var SelUserid = 0;
    var Value = "";
    var disticts = "";

    var GpList = "";
    var PsList = "";
    var PoList = "";


    var SendGp = "";
    var SendPs = "";
    var SendPo = "";

</script>


<div class="loader">


    <div id="loading-img">
        <center><img src="~/Content/pleasewait.gif" /></center>
    </div>
</div>
<div class="container-fluid" id="sign">
    <marquee scrollamount="7"><font color="green" size="3"><b>Report can be viewed for a date range of one month,if date range is more than one month please click on download.</b></font></marquee>

    <div class="logo" style="text-align: center;"><h3><b>Detailed Report New</b></h3></div>
    <div class="col-sm-12">
        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">District</span>
                    @Html.DropDownListFor(m => m.disid, new SelectList(Model.district, "Value", "Text"), new { @class = "form-control", @tabindex = "6" })
                </div>
            </div>
        </div>
        <div class="col-md-3" id="">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">Sub Division</span>
                    @Html.DropDownListFor(m => m.subdivid, new SelectList(Model.subdivision, "Value", "Text"), new { @class = "form-control", @tabindex = "7" })
                </div>
            </div>
        </div>
        <div class="col-md-3" id="">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">Location</span>
                    @Html.DropDownListFor(m => m.muncorp, new SelectList(Model.muncorpname, "Value", "Text"), new { @class = "form-control Location", id = "Location", @tabindex = "8" })
                </div>
            </div>
        </div>
        <div class="col-md-3" id="">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">P.S</span>

                    @Html.DropDownListFor(m => m.ps, new SelectList(Model.psname, "Value", "Text"), new { @class = "form-control perpsid", id = "perpsid" })
                </div>
            </div>

        </div>

        <div class="col-md-3" id="">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">P.O</span>
                    @Html.DropDownListFor(m => m.po, new SelectList(Model.poname, "Value", "Text"), new { @class = "form-control perPOid", id = "perPOid" })
                </div>
            </div>

        </div>


        <div class="col-md-3" id="">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">GP/Ward</span>
                    @Html.DropDownListFor(m => m.ward, new SelectList(Model.wardname, "Value", "Text"), new { @class = "form-control ward", id = "ward" })
                </div>
            </div>

        </div>

        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">User Type</span>
                    @Html.DropDownListFor(m => m.Typeid, new SelectList(Model.Type, "Value", "Text"), new { @class = "form-control Location", id = "Typeid", @tabindex = "8" })
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">Role</span>
                    @Html.DropDownListFor(m => m.Roleid, new SelectList(Model.Role, "Value", "Text"), new { @class = "form-control Location", id = "Roleid", @tabindex = "8" })
                </div>
            </div>
        </div>
        <div class="col-md-3" id="divRepUserId">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">Users</span>
                    @Html.DropDownListFor(m => m.Userid, new SelectList(Model.Users, "Value", "Text"), new { @class = "form-control", id = "Userid", @tabindex = "8" })
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">Worker Type</span>
                    @Html.DropDownList("schemeid", new List<SelectListItem>
                                        {
                                             new SelectListItem{ Text="-- Select Worker Type --", Value = "0" },
                                              new SelectListItem{ Text="ALL", Value = "ConstructionWorker,TransportWorker,Others" },
                                            new SelectListItem{ Text="Construction Worker", Value = "ConstructionWorker" },
                                             new SelectListItem{ Text="Transport Worker", Value = "TransportWorker" },
                                              new SelectListItem{ Text="Other Worker", Value = "Others" }
                                        }, new { @class = "form-control" })
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">Status</span>
                    @Html.DropDownList("SchemeStatus", new List<SelectListItem>
                                        {
                                              new SelectListItem{ Text="ALL", Value = "0,1,2,3" },
                                            new SelectListItem{ Text="Approved", Value = "1" },
                                             new SelectListItem{ Text="Pending", Value = "0" },
                                              new SelectListItem{ Text="Rejected", Value = "2" },
                                              new SelectListItem{ Text="SendBack", Value = "3" }
                                        }, new { @class = "form-control" })
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">Form Status</span>
                    @Html.DropDownList("FromStatus", new List<SelectListItem>
                                        {
                                              new SelectListItem{ Text="ALL", Value = "Y,N" },
                                            new SelectListItem{ Text="Partially filled in", Value = "N" },
                                             new SelectListItem{ Text="Completely filled in", Value = "Y" },

                                        }, new { @class = "form-control" })
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">Religion</span>
                    @Html.DropDownListFor(m => m.relgid, new SelectList(Model.religion, "Value", "Text"), new { @class = "form-control " })

                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">From Date</span>
                    @Html.TextBoxFor(m => m.fromdate, new { @class = "form-control" })
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <div class="input-group extra-space">
                    <span class="input-group-addon input-label">To Date</span>
                    @Html.TextBoxFor(m => m.todate, new { @class = "form-control" })
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <a class="btn btn-primary" onclick="GetRepData()">Submit</a>
            <a class="btn btn-primary" style="margin-left: 10px;" onclick="GetDwnld()">Download</a>

        </div>


    </div>


    <div class="input-group" style="align-content:flex-end; width:300px;margin-left:700px;">
        <input type="Search" placeholder="Enter SSIN Number/Scheme Registration" class="form-control searchval" onkeydown="return IsAlphaNumaric(event)" />
        <div class="input-group-btn">
            <button class="btn btn-info getSearchDet" style="background-color:#094c86">
                <span class="glyphicon glyphicon-search" style="height: 19px;"></span>
            </button>
        </div>
    </div>
    <div class="container-fluid" id="Div1" style="margin-top : 10px;">
        <div id="ID_DetailedReport"></div>
    </div>
    <div class="container-fluid" id="Div1" style="margin-top : 10px;">
        <div class="row">
            <div>


                <table class="detailedAppl  table-bordered display" cellspacing="0" width="100%">
                    <thead style="background-color:#094c86;color:white;">
                        <tr>
                            <th colspan="12">
                                <center>Benificiary Details</center>
                            </th>
                            <th colspan="7">
                                <center> Address</center>
                            </th>
                            <th colspan="3"></th>
                        </tr>
                        <tr>
                            <th>S.No.</th>
                            <th>SSI Number</th>
                            <th>Worker Type</th>
                            <th>Scheme Registration</th>
                            <th>Date Of Registration</th>
                            <th>Verified Date</th>
                            <th>Name</th>
                            <th>Father's Name</th>
                            <th>Religion</th>
                            <th>Date Of Birth</th>
                            <th>Mobile No</th>
                            <th>PF</th>
                            <th>District</th>
                            <th>Sub Division</th>
                            <th>Location</th>
                            <th>P.S</th>
                            <th>P.O</th>
                            <th>Gp/Ward</th>
                            <th>Village</th>
                            <th>Status</th>
                            <th>Form Submission Status</th>
                            <th>View</th>

                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

            </div>

        </div>
        <div class="row">
            <div class="col-lg-2 col-md-2 col-sm-1 pull-right" style="padding-right:-15px;padding-top:5px; padding-bottom:5px;">
                <div class="input-group input-group-sm">
                    <input type="text" id="txtPaging" class="form-control" placeholder="Jump to Page..">
                    <span class="input-group-btn">
                        <button class="btn btn-primary" type="button" id="btnPaging">Go!</button>
                    </span>
                </div>
            </div>
        </div>
        <input type="hidden" id="BenSno" value="0" name="BenSno" />
    </div>

    <br />
    <br />


</div>
<script>
    $(document).ready(function () {
        $("#Typeid").val("-1");
        $("#Roleid").val("-1");
        $("#Userid").val("-1");
        getdates();
        var tblheader= "";
        var users = "";
        var senduseridrep  = $("#Userid").val();
        var lengthrep = $('#Userid').children('option').length;
        if(senduseridrep.length == lengthrep)
            users = "All";
        else
            users = $("#Userid option:selected").text();
		if (UserTypeid == 1 || UserTypeid == 5 || UserTypeid == 21 || UserTypeid == 22 || UserTypeid == 23 || UserTypeid == 24)
            tblheader = "District : " +$("#disid option:selected").text()+" , "+" Sub Division : "+$("#subdivid option:selected").text() +" , "+" Location : "+$("#Location option:selected").text() +"\n\n"+ "UserType : " +$("#Typeid option:selected").text()+" , "+ "Role : " +$("#Roleid option:selected").text()+" , "+ "User : " +users+"\n\n"+" Worker Type : "+$("#schemeid option:selected").text()+", Status : "+$("#SchemeStatus option:selected").text()+"\n\n"+" From Date : " + $("#fromdate").val() +" , "+" To Date :" +$("#todate").val();
        if(UserTypeid == 7 ||UserTypeid == 3 || UserTypeid == 4)
            tblheader = "District : " +$("#disid option:selected").text()+"\n\n"+ "UserType : " +$("#Typeid option:selected").text()+" , "+ "Role : " +$("#Roleid option:selected").text()+" , "+ "User : " +users +"\n\n"+" Worker Type : "+$("#schemeid option:selected").text()+", Status : "+$("#SchemeStatus option:selected").text()+"\n\n"+" From Date : " + $("#fromdate").val() +"  "+", To Date : " +$("#todate").val();
        if(UserTypeid == 6)
            tblheader = "District : " +$("#disid option:selected").text() +" , "+" Sub Division : "+$("#subdivid option:selected").text() +" , "+" Location : "+$("#Location option:selected").text() +"\n\n"+ "UserType : " +$("#Typeid option:selected").text()+" , "+ "Role : " +$("#Roleid option:selected").text()+" , "+ "User : " +users +"\n\n"+" Worker Type : "+$("#schemeid option:selected").text()+", Status : "+$("#SchemeStatus option:selected").text()+"\n\n"+" From Date : " + $("#fromdate").val() +"  "+", To Date : " +$("#todate").val();


        $('.detailedAppl').DataTable({
            "bSort": false
        });


        //Asst  Labour Com
        if(UserTypeid == 6)
        {
            $("#disid").attr("disabled", true);
        }

        // Deputy Labour Com , Additional LC , Joint LC
        if(UserTypeid == 7 || UserTypeid == 3 || UserTypeid == 4)
        {
            $("#divloc").hide();
            $("#divsub").hide();
        }

        //Inspector
        if(UserTypeid == "5")
        {

            $.get('@Url.Action("GetMultipleLoca", "Registration")', { Uid: Deptid }, function (dat) {
                $("#Location").find("option").remove();
                $("#Location").append("<option value=-1> " + "ALL" + " </option>");
                RepLocation = "";
                $.each(dat, function (i, data) {

                    $("#Location").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                    RepLocation +=  data.Value +",";
				});
				//alert("bef ps");
				loadPS();
				loadperPO();
				loadGP();
				//alert("af po");
            });
        }

        //Asst  Labour Com
        if(UserTypeid == "6")
        {
            $.get('@Url.Action("GetMultipleSubDiv", "Registration")', { Uid: Deptid }, function (dat) {
                $("#subdivid").find("option").remove();
                $("#subdivid").append("<option value=-1> " + "ALL" + " </option>");
                RepSubDVision = "";
                $.each(dat, function (i, data) {

                    $("#subdivid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                    RepSubDVision +=  data.Value +"," ;
                });
                if(UserTypeid == "6")
                {
                    GetAlcLocations()
				}
				loadPS();
				loadperPO();
				loadGP();
            });
        }

        // Deputy Labour Com , Additional LC , Joint LC
        if(UserTypeid == "7" || UserTypeid == "3" || UserTypeid == "4")
        {
            $.get('@Url.Action("GetMultipleDistricts", "Registration")', { Uid: Deptid}, function (dat) {

                $("#disid").find("option").remove();

                $("#disid").append("<option value=0> " + "Select District" + " </option>");
                $.each(dat, function (i, data) {
                    $("#disid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                });
			});
			loadPS();
			loadperPO();
			loadGP();
        }
    })

    $(".getSearchDet").click(function () {

        var value = $(".searchval").val();

        if (value == "" || value == null) {
            alert("Please Enter SSIN Number/Scheme Registration.");
            return false;
        }

        GetRepData()
    })
    function GetRepData() {


        if (UserTypeid == 1 || UserTypeid == 2 || UserTypeid == 21 || UserTypeid == 22 || UserTypeid == 23 || UserTypeid == 24) {
            if ($("#disid").val() == "" || $("#disid").val() == null || $("#disid").val() == "0") {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == "" || $("#subdivid").val() == null || $("#subdivid").val() == "0") {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == "" || $("#Location").val() == null || $("#Location").val() == "0") {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#Typeid").val() == "" || $("#Typeid").val() == null || $("#Typeid").val() == "-1") {
                alert("Please Select User Type");
                $("#Typeid").focus();
                return false;
            }
            if ($("#Roleid").val() == "" || $("#Roleid").val() == null || $("#Roleid").val() == "-1") {
                alert("Please Select Role");
                $("#Roleid").focus();
                return false;
            }
            if ($("#Userid").val() == "" || $("#Userid").val() == null || $("#Userid").val() == "-1") {
                alert("Please Select User");
                $("#Userid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null || $("#schemeid").val() == "0") {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 5) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == 0 || $("#subdivid").val() == "" || $("#subdivid").val() == null) {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == 0 || $("#Location").val() == "" || $("#Location").val() == null) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#Typeid").val() == "" || $("#Typeid").val() == null || $("#Typeid").val() == "-1") {
                alert("Please Select User Type");
                $("#Typeid").focus();
                return false;
            }
            if ($("#Roleid").val() == "" || $("#Roleid").val() == null || $("#Roleid").val() == "-1") {
                alert("Please Select Role");
                $("#Roleid").focus();
                return false;
            }
            if ($("#Userid").val() == "" || $("#Userid").val() == null || $("#Userid").val() == "-1") {
                alert("Please Select User");
                $("#Userid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null || $("#schemeid").val() == "0") {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 6) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == 0 || $("#subdivid").val() == "" || $("#subdivid").val() == null) {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == 0 || $("#Location").val() == "" || $("#Location").val() == null) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#Typeid").val() == "" || $("#Typeid").val() == null || $("#Typeid").val() == "-1") {
                alert("Please Select User Type");
                $("#Typeid").focus();
                return false;
            }
            if ($("#Roleid").val() == "" || $("#Roleid").val() == null || $("#Roleid").val() == "-1") {
                alert("Please Select Role");
                $("#Roleid").focus();
                return false;
            }
            if ($("#Userid").val() == "" || $("#Userid").val() == null || $("#Userid").val() == "-1") {
                alert("Please Select User");
                $("#Userid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null || $("#schemeid").val() == "0") {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 7 || UserTypeid == 3 || UserTypeid == 4) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#Typeid").val() == "" || $("#Typeid").val() == null || $("#Typeid").val() == "-1") {
                alert("Please Select User Type");
                $("#Typeid").focus();
                return false;
            }
            if ($("#Roleid").val() == "" || $("#Roleid").val() == null || $("#Roleid").val() == "-1") {
                alert("Please Select Role");
                $("#Roleid").focus();
                return false;
            }
            if ($("#Userid").val() == "" || $("#Userid").val() == null || $("#Userid").val() == "-1") {
                alert("Please Select User");
                $("#Userid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null || $("#schemeid").val() == "0") {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        // Date validations
        var arr1 = $('#fromdate').val().split('-');
        var arr2 = $('#todate').val().split('-');
        var startDate = new Date(arr1[1] + "-" + arr1[0] + "-" + arr1[2]);
        var endDate = new Date(arr2[1] + "-" + arr2[0] + "-" + arr2[2]);
        var diffDate = (endDate - startDate) / 1000 / 60 / 60 / 24;
        if (diffDate > 31 || diffDate < 0) {
            alert("Report can be viewed for a date range of one Month");
            return false;
        }

        var selectedUserid = $("#Userid option:selected").text();
        var senduserid = $("#Userid").val();
        var length = $('#Userid').children('option').length;
        ValuSend = "";
        SendSubDiv = "";
        SendLocation = "";
        Value = "1";
        if ($("#subdivid").val() == "-1") {
            SendSubDiv = RepSubDVision;
        }
        else {
            SendSubDiv = $("#subdivid").val();
        }
        if ($("#Location").val() == "-1") {
            SendLocation = RepLocation;
        }
        else {
            SendLocation = $("#Location").val();
        }
        var SelectedUSerid = $("#Userid option:selected");

        if (length == senduserid.length) {
            Value = 0;
        }

        SelUserid = 1;
        SelectedUSerid.each(function () {

            var res = $(this).val();
            ValuSend += $(this).val() + ",";
        });

        $('.detailedAppl tbody').empty();

        var table = $('.detailedAppl').DataTable();
        table.destroy();
        $('.detailedAppl tbody').empty();


        var senduseridrep = $("#Userid").val();
        var lengthrep = $('#Userid').children('option').length;
        if (senduseridrep.length == lengthrep)
            users = "All";
        else
            users = $("#Userid option:selected").text();
        if (UserTypeid == 1 || UserTypeid == 5 || UserTypeid == 21 || UserTypeid == 22 || UserTypeid == 23 || UserTypeid == 24)
            tblheader = "District : " + $("#disid option:selected").text() + " , " + " Sub Division : " + $("#subdivid option:selected").text() + " , " + " Location : " + $("#Location option:selected").text() + "\n\n" + "UserType : " + $("#Typeid option:selected").text() + " , " + "Role : " + $("#Roleid option:selected").text() + " , " + "User : " + users + "\n\n" + " Worker Type : " + $("#schemeid option:selected").text() + ", Status : " + $("#SchemeStatus option:selected").text() + "\n\n" + " From Date : " + $("#fromdate").val() + " , " + " To Date :" + $("#todate").val();
        if (UserTypeid == 7 || UserTypeid == 3 || UserTypeid == 4)
            tblheader = "District : " + $("#disid option:selected").text() + "\n\n" + "UserType : " + $("#Typeid option:selected").text() + " , " + "Role : " + $("#Roleid option:selected").text() + " , " + "User : " + users + "\n\n" + " Worker Type : " + $("#schemeid option:selected").text() + ", Status : " + $("#SchemeStatus option:selected").text() + "\n\n" + " From Date : " + $("#fromdate").val() + "  " + ", To Date : " + $("#todate").val();
        if (UserTypeid == 6)
            tblheader = "District : " + $("#disid option:selected").text() + " , " + " Sub Division : " + $("#subdivid option:selected").text() + " , " + " Location : " + $("#Location option:selected").text() + "\n\n" + "UserType : " + $("#Typeid option:selected").text() + " , " + "Role : " + $("#Roleid option:selected").text() + " , " + "User : " + users + "\n\n" + " Worker Type : " + $("#schemeid option:selected").text() + ", Status : " + $("#SchemeStatus option:selected").text() + "\n\n" + " From Date : " + $("#fromdate").val() + "  " + ", To Date : " + $("#todate").val();

        //Police Station
        if ($("#perpsid").val() == "-1") {
            SendPs = PsList;
        }
        else {
            SendPs = $("#perpsid").val();
        }



        //PostOffice
        if ($("#perPOid").val() == "-1") {
            SendPo = PoList;
        }
        else {
            SendPo = $("#perPOid").val();
        }


        // Gp List
        if ($("#ward").val() == "-1") {
            SendGp = GpList;
        }
        else {
            SendGp = $("#ward").val();
        }

        $('#ID_DetailedReport').jtable({
            title: 'Detailed Report',
            paging: true,
            pageSize: 10,
            sorting: false,
            actions: {
                listAction: function(postData, jtParams) {
                    return $.Deferred(function ($dfd) {
                        $.ajax({
                            url: "/Report/DetailedReport",
                            type: 'POST',
                            dataType: 'json',
                            data: {
                                SelectUserid: ValuSend, Districtid: $("#disid").val(), Subdivid: SendSubDiv, Locid: SendLocation, Fromdate: $("#fromdate").val(), Todate: $("#todate").val(), schemeid: $("#schemeid").val(), SchemeStatus: $("#SchemeStatus").val(), UserCategryid: $("#Typeid").val(), selectusertype: $("#Roleid").val(), userid: SelUserid, SearchValue: $(".searchval").val(), Value: Value, FormStatus: $("#FromStatus").val(), GpList: SendGp, PoList: SendPo, PsList: SendPs, Religion: $("#relgid").val(), jtStartIndex: jtParams.jtStartIndex, jtPageSize: jtParams.jtPageSize
                            },
                            success: function (data) {
                                $dfd.resolve(data);
                            },
                            error: function () {
                                $dfd.reject();
                            }
                        });
                    });
                }
            },
            recordsLoaded: function (event, data) {

                $('#ID_DetailedReport').find('.jtable-toolbar-item jtable-toolbar-item-add-record').remove();
            },
            fields: {
                //ID: {
                //    key: true,
                //    list: false
                //},
                Sno: {
                    title: 'Sno',
                    width: '10%'
                },
                SSINNo: {
                    title: 'SSINNo',
                    width: '10%'
                },
                WorkerType: {
                    title: 'WorkerType',
                    width: '10%'
                },
                SchemeNo: {
                    title: 'SchemeNo',
                    width: '10%'
                },
                RegDate: {
                    title: 'RegDate',
                    width: '10%'
                },
                VerifyDate: {
                    title: 'VerifyDate',
                    width: '10%'
                },
                Name: {
                    title: 'Name',
                    width: '10%'
                },
                fathername: {
                    title: 'fathername',
                    width: '10%'
                },
                Religion: {
                    title: 'Religion',
                    width: '10%'
                }, DOB: {
                    title: 'DOB',
                    width: '10%'
                }, Mobileno: {
                    title: 'Mobileno',
                    width: '10%'
                }, DistrictName: {
                    title: 'DistrictName',
                    width: '10%'
                }, SubDivisionName: {
                    title: 'SubDivisionName',
                    width: '10%'
                }, BlockName: {
                    title: 'BlockName',
                    width: '10%'
                }, PsName: {
                    title: 'PsName',
                    width: '10%'
                }, PoName: {
                    title: 'PoName',
                    width: '10%'
                }, GpWard: {
                    title: 'GpWard',
                    width: '10%'
                }, Village: {
                    title: 'Village',
                    width: '10%'
                }, Status: {
                    title: 'Status',
                    width: '10%'
                }
                , FormStatus: {
                    title: 'FormStatus',
                    width: '10%'
                },
                BenSno: {
                    title: 'View',
                    display: function (data) {
                        debugger;
                        console.log(data);
                        return '<td><a href="#" data-toggle="modal" data-target=".regpop"  onClick = "Bentrnasclick(' + data.record.BenSno + ');" ' + '>' + "View" + '</a></td>';
                    }
                }
                

            }
        });
        $('#ID_DetailedReport').jtable('load');
        $('.jtable').wrap('<div class="jtable-main-container scroll-content" />');    

        //$('.detailedAppl').dataTable().fnDestroy();
        //$('.detailedAppl tbody').empty();
        //$('.detailedAppl').DataTable({

        //    //  dom: 'Bfrtip',
        //    "bSort": false,
        //    "processing": true,
        //    "serverSide": true,

        //    "ajax": {
        //        "url": "/Report/DetailedReport",
        //        "type": "POST",
        //        "data": { SelectUserid: ValuSend, Districtid: $("#disid").val(), Subdivid: SendSubDiv, Locid: SendLocation, Fromdate: $("#fromdate").val(), Todate: $("#todate").val(), schemeid: $("#schemeid").val(), SchemeStatus: $("#SchemeStatus").val(), UserCategryid: $("#Typeid").val(), selectusertype: $("#Roleid").val(), userid: SelUserid, SearchValue: $(".searchval").val(), Value: Value, FormStatus: $("#FromStatus").val(), GpList: SendGp, PoList: SendPo, PsList: SendPs, Religion: $("#relgid").val() },
        //        "dataType": "JSON"
        //    },

        //    "columns": [

        //        { "data": "Sno" },
        //        { "data": "SSINNo" },
        //        { "data": "WorkerType" },
        //        { "data": "SchemeNo" },
        //        { "data": "RegDate" },
        //        { "data": "VerifyDate" },
        //        { "data": "Name" },
        //        { "data": "fathername" },
        //        { "data": "Religion" },
        //        { "data": "DOB" },
        //        { "data": "Mobileno" },
        //        { "data": "PFStatus" },
        //        { "data": "DistrictName" },
        //        { "data": "SubDivisionName" },
        //        { "data": "BlockName" },
        //        { "data": "PsName" },
        //        { "data": "PoName" },
        //        { "data": "GpWard" },
        //        { "data": "Village" },
        //        { "data": "Status" },
        //        { "data": "FormStatus" },
        //        {
        //            "data": "BenSno", 'render': function (data, type, row) {
        //                return '<td><a href="#" data-toggle="modal" data-target=".regpop"  onClick = "Bentrnasclick(' + row.BenSno + ');" ' + '>' + "View" + '</a></td>';
        //            },
        //        }],

        //    "order": [[1, 'asc']],


        //});
        @*$.post('@Url.Action("DetailedReport", "Report")', { SelectUserid: ValuSend, Districtid: $("#disid").val(), Subdivid: SendSubDiv, Locid: SendLocation, Fromdate: $("#fromdate").val(), Todate: $("#todate").val(), schemeid: $("#schemeid").val(), SchemeStatus: $("#SchemeStatus").val(), UserCategryid: $("#Typeid").val(), selectusertype: $("#Roleid").val(), userid: SelUserid, SearchValue: $(".searchval").val(), Value: Value, FormStatus: $("#FromStatus").val(), GpList: SendGp, PoList: SendPo, PsList: SendPs, Religion: $("#relgid").val() }, function (result) {
            alert(result.recordsTotal);
            $('.detailedAppl').dataTable().fnDestroy();
            $('.detailedAppl tbody').empty();

            if (!result.data) {
                return;
            }
                $('.detailedAppl').DataTable({

                    data: result.data,
                    deferRender: true,
                    scrollY: 200,
                    scrollCollapse: true,
                    scroller: true,
                    columns: [
                        { "data": "Sno" },
                        { "data": "SSINNo" },
                        { "data": "WorkerType" },
                        { "data": "SchemeNo" },
                        { "data": "RegDate" },
                        { "data": "VerifyDate" },
                        { "data": "Name" },
                        { "data": "fathername" },
                        { "data": "Religion" },
                        { "data": "DOB" },
                        { "data": "Mobileno" },
                        { "data": "PFStatus" },
                        { "data": "DistrictName" },
                        { "data": "SubDivisionName" },
                        { "data": "BlockName" },
                        { "data": "PsName" },
                        { "data": "PoName" },
                        { "data": "GpWard" },
                        { "data": "Village" },
                        { "data": "Status" },
                        { "data": "FormStatus" },
                        {
                            "data": "BenSno", 'render': function (data, type, row) {
                                return '<td><a href="#" data-toggle="modal" data-target=".regpop"  onClick = "Bentrnasclick(' + row.BenSno + ');" ' + '>' + "View" + '</a></td>';
                            },
                        }],


                    rowCallback: function (row, data, index) {


                        if (data.ReviveStatus == 1) {
                            $('td', row).css('background-color', '#CDBB79');
                        }
                    }


                });

        });*@

        //$('.detailedAppl').DataTable({

        //  //  dom: 'Bfrtip',
        //    "bSort": false,
        //    "processing": true,
        //    "serverSide": true,

        //    "ajax":{
        //        "url": "/Report/DetailedReport",
        //        "type": "POST",
        //        "data": { SelectUserid: ValuSend, Districtid: $("#disid").val(), Subdivid: SendSubDiv, Locid: SendLocation, Fromdate: $("#fromdate").val(), Todate: $("#todate").val(), schemeid: $("#schemeid").val(), SchemeStatus: $("#SchemeStatus").val(), UserCategryid: $("#Typeid").val(), selectusertype: $("#Roleid").val(), userid: SelUserid, SearchValue: $(".searchval").val(), Value: Value, FormStatus: $("#FromStatus").val(), GpList: SendGp, PoList: SendPo, PsList : SendPs, Religion : $("#relgid").val()},
        //        "dataType": "JSON"
        //    },

        //    "columns": [

        //        { "data": "Sno" },
        //         { "data": "SSINNo" },
        //        { "data": "WorkerType" },
        //        { "data": "SchemeNo" },
        //        { "data": "RegDate" },
        //        { "data": "VerifyDate" },
        //        { "data": "Name" },
        //        { "data": "fathername" },
        //        { "data": "Religion" },
        //        { "data": "DOB" },
        //        { "data": "Mobileno" },
        //        { "data": "PFStatus" },
        //        { "data": "DistrictName" },
        //        { "data": "SubDivisionName" },
        //        { "data": "BlockName" },
        //        { "data": "PsName" },
        //        { "data": "PoName" },
        //        { "data": "GpWard" },
        //        { "data": "Village" },
        //        { "data": "Status" },
        //        { "data": "FormStatus" },
        //        { "data": "BenSno",'render': function (data, type, row) {
        //            return '<td><a href="#" data-toggle="modal" data-target=".regpop"  onClick = "Bentrnasclick(' + row.BenSno + ');" '+ '>'  + "View" + '</a></td>';},}],

        //    "order": [[ 1, 'asc' ]],


        //});

    }

    $("#Dwnpdf").click(function(){
        $("#loadSymbol").hide();
        $("#Dwnpdf").hide()
        $("#genpdf").show();
        window.location.href = "DownloadDetailedRepExcel/?filename="+path;
    })


    function getdates() {
        $("#fromdate,#todate").datepicker({
            dateFormat: "dd-mm-yy",
            changeYear: true,
            yearRange: "1960:2020",
            autoclose: true,
            maxDate: new Date()
        })
        var dat = new Date();
        var month = (dat.getMonth() + 1) < 10 ? '0' + (dat.getMonth() + 1) : '' + (dat.getMonth() + 1);
        var day = (dat.getDate()) < 10 ? '0' + (dat.getDate()) : '' + (dat.getDate());
        var today = day + "-" + month + "-" + dat.getFullYear();
        $("#fromdate,#todate").val(today);
    }
    //Get Detailed Report
    //Load Subdivision
    $("#disid").change(loadSubdiv);
    function loadSubdiv() {

        $.get('@Url.Action("GetSubdivisionJSON", "Login")', { ID: $("#disid").val() }, function (dat) {
            $("#subdivid").find("option").remove();
            $("#subdivid").append("<option value=-1>ALL</option>");
            RepSubDVision = "";
            $.each(dat, function (i, data) {

                if(data.Value !="0")
                    $("#subdivid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                RepSubDVision +=  data.Value +",";
            });
            loadGP();

        });
        // get blocks
        $.get('@Url.Action("GetblockforDisRepJSON", "Report")', { ID: $("#disid").val() }, function (dat) {

            $("#Location").find("option").remove();
            RepLocation = "";
            $.each(dat, function (i, data) {

                $("#Location").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                RepLocation +=  data.Value +",";
            });
        });

        loadPS();
        loadperPO();

    }
    //Load Blocks
    $("#subdivid").change(loadBlock);
    function loadBlock() {

        var val = $("#subdivid").val();
        if(val == "-1")
        {
            GetAlcLocations()
        }
        else
        {
            $.get('@Url.Action("GetblockforSubRepJSON", "Report")', { ID: $("#subdivid").val() }, function (dat) {

                $("#Location").find("option").remove();
                $("#Location").append("<option value=-1>ALL</option>");
                RepLocation = "";
                $.each(dat, function (i, data) {

                    if(data.Value !="0")
                        $("#Location").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                    RepLocation +=  data.Value +",";
                });
            });
        }

        loadGP();
    }

  //  $("#perpsid").change(loadGP);

    //Load Roles
    $("#Typeid").change(LoadRoles);
    function LoadRoles()
    {
        if($("#Typeid").val() == "3")
        {
            $("#Roleid").find("option").remove();
            $("#Userid").find("option").remove();
            $("#Roleid,#Userid").append("<option value=15>Beneficiary</option>");
            $("#Userid").attr("multiple", "multiple");
            $('#Userid').multiselect({
                columns:3,
                placeholder: 'Select Languages',
                search: true,
                includeSelectAllOption: true
                // selectAll: true
            })
            $("#Userid").multiselect('rebuild');
        }
        else
        {
            LoadRoles = "";
            $.get('@Url.Action("GetJsonRoles", "Report")', { id: $("#Typeid").val()}, function (dat) {

                $("#Roleid").find("option").remove();
                $.each(dat, function (i, data) {

                   // alert(UserTypeid +" "+data.Value);

					if (UserTypeid == "1" || UserTypeid == "21" || UserTypeid == "22" || UserTypeid == "24")
                    {
                        $("#Roleid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                        LoadRoles += data.Value +",";
                    }
                    if( UserTypeid == "7" ||UserTypeid =="3" ||UserTypeid =="4")
                    {
                        if(data.Value != "1")
                        {
                            $("#Roleid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                            LoadRoles += data.Value +",";
                        }

                    }
                    if( UserTypeid == "6")
                    {
                        if(data.Value != "1" && data.Value != "7" && data.Value != "3" && data.Value != "4" )
                        {
                            $("#Roleid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                            LoadRoles += data.Value +",";
                        }

                    }
                    if( UserTypeid == "5")
                    {
                        if(data.Value != "1" && data.Value != "7" && data.Value != "6" && data.Value != "3" && data.Value != "4")
                        {
                            $("#Roleid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                            LoadRoles += data.Value +",";
                        }

                    }
                });
                $("#Roleid").val("-1");
            });
        }
    }
    //load Users
    $("#Roleid").change(LoadUsers);
    function LoadUsers()
    {
        var checkids="0";
        var sendroles = "";

        if(UserTypeid == "7")
        {
            checkids =  $("#disid").val();
        }
        if(UserTypeid == "6")
        {
            checkids =  $("#subdivid").val();
        }
        if($("#subdivid").val() == "-1")
        {
            SendSubDiv =   RepSubDVision;
        }
        else
        {
            SendSubDiv = $("#subdivid").val();
        }
        if($("#Location").val() == "-1")
        {
            SendLocation =   RepLocation ;
        }
        else
        {
            SendLocation = $("#Location").val();
        }
        if($("#Roleid").val() != "0" && $("#Roleid").val() != "-1")
            sendroles = $("#Roleid").val();
        else
            sendroles = LoadRoles;




        $.get('@Url.Action("GetJsonUsers", "Report")', { Roleids: sendroles, Districtid: $("#disid").val(), Subdivid: SendSubDiv, Locid: SendLocation }, function (dat) {

            $("#Userid").find("option").remove();
            $.each(dat, function (i, data) {
                if(data.Value !="0" && data.Value !="-1")
                    $("#Userid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
            });
            $("#Userid").attr("multiple", "multiple");
            $('#Userid').multiselect({
                columns:3,
                placeholder: 'Select Languages',
                search: true,
                includeSelectAllOption: true
            })
            $("#Userid").multiselect('rebuild');
        });
    }
    //Load Alc Locations
    function GetAlcLocations()
    {
        $.get('@Url.Action("GetBlocksBySubDivision", "Report")', { ID:RepSubDVision }, function (dat) {

            $("#Location").find("option").remove();
            RepLocation = "";
            $.each(dat, function (i, data) {

                $("#Location").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                RepLocation +=  data.Value +",";
            });
        });
    }

    function GetDwnld() {
		if (UserTypeid == 1 || UserTypeid == 2 || UserTypeid == 21 || UserTypeid == 22 || UserTypeid == 23 || UserTypeid == 24)
        {
            if ($("#disid").val() == "" || $("#disid").val() == null||$("#disid").val() == "0" ) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == "" || $("#subdivid").val() == null|| $("#subdivid").val() == "0") {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == "" || $("#Location").val() == null ||$("#Location").val() == "0" ) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#Typeid").val() == "" || $("#Typeid").val() == null ||$("#Typeid").val() == "-1" ) {
                alert("Please Select User Type");
                $("#Typeid").focus();
                return false;
            }
            if ($("#Roleid").val() == "" || $("#Roleid").val() == null ||$("#Roleid").val() == "-1" ) {
                alert("Please Select Role");
                $("#Roleid").focus();
                return false;
            }
            if ($("#Userid").val() == "" || $("#Userid").val() == null ||$("#Userid").val() == "-1" ) {
                alert("Please Select User");
                $("#Userid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 5) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == 0 || $("#subdivid").val() == "" || $("#subdivid").val() == null) {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == 0 || $("#Location").val() == "" || $("#Location").val() == null) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#Typeid").val() == "" || $("#Typeid").val() == null ||$("#Typeid").val() == "-1" ) {
                alert("Please Select User Type");
                $("#Typeid").focus();
                return false;
            }
            if ($("#Roleid").val() == "" || $("#Roleid").val() == null ||$("#Roleid").val() == "-1" ) {
                alert("Please Select Role");
                $("#Roleid").focus();
                return false;
            }
            if ($("#Userid").val() == "" || $("#Userid").val() == null ||$("#Userid").val() == "-1" ) {
                alert("Please Select User");
                $("#Userid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 6) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#subdivid").val() == 0 || $("#subdivid").val() == "" || $("#subdivid").val() == null) {
                alert("Please Select SubDivision");
                $("#subdivid").focus();
                return false;
            }
            if ($("#Location").val() == 0 || $("#Location").val() == "" || $("#Location").val() == null) {
                alert("Please Select Location");
                $("#Location").focus();
                return false;
            }
            if ($("#Typeid").val() == "" || $("#Typeid").val() == null ||$("#Typeid").val() == "-1" ) {
                alert("Please Select User Type");
                $("#Typeid").focus();
                return false;
            }
            if ($("#Roleid").val() == "" || $("#Roleid").val() == null ||$("#Roleid").val() == "-1" ) {
                alert("Please Select Role");
                $("#Roleid").focus();
                return false;
            }
            if ($("#Userid").val() == "" || $("#Userid").val() == null ||$("#Userid").val() == "-1" ) {
                alert("Please Select User");
                $("#Userid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }
        if (UserTypeid == 7 || UserTypeid == 3 || UserTypeid == 4) {
            if ($("#disid").val() == 0 || $("#disid").val() == "" || $("#disid").val() == null) {
                alert("Please Select District");
                $("#disid").focus();
                return false;
            }
            if ($("#Typeid").val() == "" || $("#Typeid").val() == null ||$("#Typeid").val() == "-1" ) {
                alert("Please Select User Type");
                $("#Typeid").focus();
                return false;
            }
            if ($("#Roleid").val() == "" || $("#Roleid").val() == null ||$("#Roleid").val() == "-1" ) {
                alert("Please Select Role");
                $("#Roleid").focus();
                return false;
            }
            if ($("#Userid").val() == "" || $("#Userid").val() == null ||$("#Userid").val() == "-1" ) {
                alert("Please Select User");
                $("#Userid").focus();
                return false;
            }
            if ($("#schemeid").val() == "" || $("#schemeid").val() == null ||$("#schemeid").val() == "0" ) {
                alert("Please Select Worker Type");
                $("#schemeid").focus();
                return false;
            }
        }

        var selectedUserid = $("#Userid option:selected").text();
        var senduserid  = $("#Userid").val();
        var length = $('#Userid').children('option').length;
        ValuSend = "";
        SendSubDiv = "";
        SendLocation = "";
        Value = "1";

        if($("#subdivid").val() == "-1")
        {
            SendSubDiv =   RepSubDVision;
        }
        else
        {
            SendSubDiv = $("#subdivid").val();
        }
        if($("#Location").val() == "-1")
        {
            SendLocation =   RepLocation ;
        }
        else
        {
            SendLocation = $("#Location").val();
        }
        var SelectedUSerid = $("#Userid option:selected");

        SelUserid = 1;
        SelectedUSerid.each(function () {

            var res =     $(this).val();
            ValuSend += $(this).val()+",";
        });

        if(length == senduserid.length )
        {
            Value = 0;
        }



        //Police Station
        if ($("#perpsid").val() == "-1") {
            SendPs = PsList;
        }
        else {
            SendPs = $("#perpsid").val();
        }



        //PostOffice
        if ($("#perPOid").val() == "-1") {
            SendPo = PoList;
        }
        else {
            SendPo = $("#perPOid").val();
        }


        // Gp List
        if ($("#ward").val() == "-1") {
            SendGp = GpList;
        }
        else {
            SendGp = $("#ward").val();
        }


        var senduseridrep  = $("#Userid").val();
        var lengthrep = $('#Userid').children('option').length;
        if(senduseridrep.length == lengthrep)
            users = "All";
        else
            users = $("#Userid option:selected").text();

		$.ajax({
			url: "/Report/DownloadDetailReportNew",
			type: 'post',
			data: { SelectUserid: ValuSend, Districtid: $("#disid").val(), Subdivid: SendSubDiv, Locid: SendLocation, Fromdate: $("#fromdate").val(), Todate: $("#todate").val(), schemeid: $("#schemeid").val(), SchemeStatus: $("#SchemeStatus").val(), UserCategryid: $("#Typeid").val(), selectusertype: $("#Roleid").val(), userid: SelUserid, ReportName: "Detailed Report", Value: Value, FormStatus: $("#FromStatus").val(), GpList: SendGp, PoList: SendPo, PsList: SendPs, Religion: $("#relgid").val() },
			success: function (result) {
				alert(result);
				//Do Something
			},
			error: function (xhr) {
				//Do Something to handle error
			}
		});

    }
    $('#btnPaging').click(function () {
        var val = $('#txtPaging').val();
        if (val != "" && val != 0) {

            val = val - 1;
            var table = $('.detailedAppl').DataTable();
            table.page(parseInt(val)).draw('page');
        }
        else {
            alert('Requested page number not valid');
            $('#txtPaging').focus();
        }
    });


    function loadPS() {

        $.get('@Url.Action("GetPSAll", "Registration")', { ID: $("#disid").val()}, function (dat) {
            $("#perpsid").find("option").remove();
            PsList = "";

            $.each(dat, function (i, data) {

                $("#perpsid").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                PsList += data.Value + ",";
            });
        });

    }


    function loadperPO() {

        $.get('@Url.Action("GetPOSTOFFICE", "Registration")', { ID: $("#disid").val()}, function (dat) {
            $("#perPOid").find("option").remove();

            PoList = "";
            $.each(dat, function (i, data) {
                $("#perPOid").append("<option value=" + data.Value + "> " + data.Text + " </option>");

                PoList += data.Value + ",";
            });
        });

    }


    function loadGP() {

        var val = $("#subdivid").val();
        if (val == "-1") {
            $.get('@Url.Action("GetGPBasedOnDistrict", "Registration")', { ID: $("#disid").val() }, function (dat) {
                $("#ward").find("option").remove();

                GpList = "";
                $.each(dat, function (i, data) {
                    $("#ward").append("<option value=" + data.Value + "> " + data.Text + " </option>");

                    GpList += data.Value + ",";
                });

                GpList += "0" + ",";
                GpList += "9999" + ",";

            });
        }
        else {


            $.get('@Url.Action("GetGPAll", "Registration")', { ID: $("#subdivid").val() }, function (dat) {
                $("#ward").find("option").remove();
                GpList = "";
                $.each(dat, function (i, data) {
                    $("#ward").append("<option value=" + data.Value + "> " + data.Text + " </option>");
                    GpList += data.Value + ",";
                });

            });

            GpList += "0" + ",";
            GpList += "9999" + ",";

        }

    }
</script>


